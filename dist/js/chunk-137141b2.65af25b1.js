(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-137141b2"],{"0bcd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{staticStyle:{"margin-right":"5px",float:"left","margin-bottom":"10px"},attrs:{type:"info"},on:{click:t.add}},[t._v("新增")]),a("Row",{staticStyle:{float:"left","margin-right":"3px"}},[a("Col",{attrs:{span:"12"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",remote:"",clearable:!0,placeholder:"请选择客户或输入客户名称","remote-method":t.remoteMethod1,loading:t.loading3},on:{"on-clear":t.clear},model:{value:t.model13,callback:function(e){t.model13=e},expression:"model13"}},t._l(t.user,function(e,i){return a("Option",{key:i,staticStyle:{width:"100px"},attrs:{value:e.name}},[t._v(t._s(e.name))])}))],1)],1),a("Button",{attrs:{type:"info"},on:{click:t.handSeek}},[t._v("搜索")]),a("Table",{staticStyle:{"margin-top":"10px"},attrs:{columns:t.columns1,data:t.data1}}),a("Modal",{attrs:{title:"新增信息",loading:t.loading},on:{"on-ok":function(e){t.ok3("formAdd")},"on-cancel":t.cancel3},model:{value:t.modal3,callback:function(e){t.modal3=e},expression:"modal3"}},[a("Form",{ref:"formAdd",attrs:{model:t.formAdd,"label-width":80,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"客户姓名",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入1-16个字符",maxlength:16},model:{value:t.formAdd.name,callback:function(e){t.$set(t.formAdd,"name",e)},expression:"formAdd.name"}})],1),a("FormItem",{attrs:{label:"手机号",prop:"phone"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入手机号"},model:{value:t.formAdd.phone,callback:function(e){t.$set(t.formAdd,"phone",e)},expression:"formAdd.phone"}})],1),a("FormItem",{attrs:{label:"省份",prop:"province"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择省份"},model:{value:t.formAdd.province,callback:function(e){t.$set(t.formAdd,"province",e)},expression:"formAdd.province"}},t._l(t.cityList,function(e){return a("Option",{key:e.id,attrs:{value:e.name},nativeOn:{click:function(a){t.chioce(e)}}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"城市",prop:"city"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择城市"},model:{value:t.formAdd.city,callback:function(e){t.$set(t.formAdd,"city",e)},expression:"formAdd.city"}},t._l(t.cityList1,function(e){return a("Option",{key:e.id,attrs:{value:e.name},nativeOn:{click:function(a){t.chioce1(e)}}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"地区",prop:"area"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择地区"},model:{value:t.formAdd.area,callback:function(e){t.$set(t.formAdd,"area",e)},expression:"formAdd.area"}},t._l(t.cityList2,function(e){return a("Option",{key:e.id,attrs:{value:e.name},nativeOn:{click:function(a){t.chioce2(e)}}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"详细地址",prop:"address"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入详细地址"},model:{value:t.formAdd.address,callback:function(e){t.$set(t.formAdd,"address",e)},expression:"formAdd.address"}})],1)],1)],1),a("Modal",{attrs:{title:"修改信息",loading:t.loading1},on:{"on-ok":function(e){t.ok("formItem")},"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":80,rules:t.ruleValidate2}},[a("FormItem",{attrs:{label:"客户姓名",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入1-16个字符",maxlength:16},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"手机号",prop:"phone"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入手机号"},model:{value:t.formItem.phone,callback:function(e){t.$set(t.formItem,"phone",e)},expression:"formItem.phone"}})],1),a("FormItem",{attrs:{label:"省份",prop:"province"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择省份"},model:{value:t.formItem.province,callback:function(e){t.$set(t.formItem,"province",e)},expression:"formItem.province"}},t._l(t.cityList,function(e){return a("Option",{key:e.id,attrs:{value:e.name},nativeOn:{click:function(a){t.chioce(e)}}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"城市",prop:"city"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择城市"},model:{value:t.formItem.city,callback:function(e){t.$set(t.formItem,"city",e)},expression:"formItem.city"}},t._l(t.cityList1,function(e){return a("Option",{key:e.id,attrs:{value:e.name},nativeOn:{click:function(a){t.chioce1(e)}}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"地区",prop:"area"}},[a("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择地区"},model:{value:t.formItem.area,callback:function(e){t.$set(t.formItem,"area",e)},expression:"formItem.area"}},t._l(t.cityList2,function(e){return a("Option",{key:e.id,attrs:{value:e.name},nativeOn:{click:function(a){t.chioce2(e)}}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"详细地址",prop:"address"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入详细地址"},model:{value:t.formItem.address,callback:function(e){t.$set(t.formItem,"address",e)},expression:"formItem.address"}})],1)],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("Page",{staticClass:"paging",attrs:{total:t.dataCount,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changepage}})],1)],1)},o=[],n=(a("7f7f"),{data:function(){var t=this,e=function(t,e,a){if(!e)return a(new Error("手机号不能为空"));/^1[34578]\d{9}$/.test(e)?a():a("手机号格式不正确")};return{user:[],model13:"",loading3:!1,markers:[{events:{click:function(){t.modal4=!t.modal4}}}],infos:[{events:{close:function(){this.modal4=!1}}}],zoom:14,center:[121.6292529148,31.2035397816],content:"",ruleValidate:{name:[{required:!0,message:"不能为空",trigger:"blur"}],phone:[{type:"number",required:!0,validator:e,message:"请输入正确的手机号",trigger:"change"}],number:[{type:"number",required:!0,message:"不能为空",trigger:"blur"}],provinceid:[{required:!0,message:"不能为空",trigger:"blur"}],cityid:[{required:!0,message:"不能为空",trigger:"blur"}],areaid:[{required:!0,message:"不能为空",trigger:"blur"}],address:[{required:!0,message:"不能为空",trigger:"blur"}]},ruleValidate2:{name:[{required:!0,message:"不能为空",trigger:"blur"}],phone:[{type:"number",required:!0,validator:e,message:"请输入正确的手机号",trigger:"change"}],number:[{type:"number",required:!0,message:"不能为空",trigger:"blur"}],pass:[{required:!0,message:"不能为空",trigger:"blur"}],address:[{required:!0,message:"不能为空",trigger:"blur"}]},searchName:"",searchNum:"",searchPhone:"",cityList:[],cityList1:[],cityList2:[],cityListId:"",cityListId1:"",cityListId2:"",shengtype:"",shitype:"",qutype:"",provincename:"",cityname:"",areaname:"",url:"",url1:"",img:{image:null,jwt:localStorage.getItem("jwt")},img1:{image:null,jwt:localStorage.getItem("jwt")},formAdd:{name:"",phone:"",city:"",province:"",area:"",address:"",jwt:localStorage.getItem("jwt")},formItem:{Id:"",name:"",phone:"",province:"",city:"",area:"",provinceid:"",cityid:"",areaid:"",address:"",jwt:localStorage.getItem("jwt")},formImg:{Id:"",img:null,jwt:localStorage.getItem("jwt")},modal1:!1,modal2:!1,modal3:!1,modal4:!0,loading:!0,loading1:!0,ajaxHistoryData:[],dataCount:0,pageSize:10,page:1,columns1:[{title:"客户姓名",key:"name"},{title:"手机号",key:"phone"},{title:"创建时间",key:"time"},{title:"省份",key:"province"},{title:"城市",key:"city"},{title:"区域",key:"area"},{title:"详细地址",key:"address"},{title:"操作",key:"action",width:180,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",marginBottom:"5px",marginTop:"3px",backColor:"#7ccc2f"},on:{click:function(){t.xiugai(a.row)}}},"修改"),e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px",marginBottom:"5px",marginTop:"3px"},attrs:{style:"background-color:#d6514d;border:1px solid #d6514d"},on:{click:function(){t.delete(a.row)}}},"删除")])}}],data1:[]}},created:function(){this.tableShow()},methods:{lizhi:function(t){var e=this;this.$axios({method:"post",url:"admin/customer/show",data:this.$qs.stringify({Id:t.Id,jwt:localStorage.getItem("jwt")})}).then(function(t){e.tableShow()}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})},noOrder:function(t){this.$router.push({path:"/o_management",query:{uid:t.Id,state:6}})},dayOrder:function(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),n=a+"-"+i+"-"+o;this.$router.push({path:"/o_management",query:{uid:t.Id,state:6,times:n}})},tableShow:function(){var t=this;this.$axios({method:"post",url:"admin/customer/show",data:this.$qs.stringify({name:this.model13,phone:this.searchPhone,number:this.searchNum,page:this.page,jwt:localStorage.getItem("jwt")})}).then(function(e){t.ajaxHistoryData=e.data.table,t.list=e.data.table,t.user=e.data.table,t.dataCount=e.data.count,e.data.count<t.pageSize?t.data1=e.data.table:t.data1=t.ajaxHistoryData.slice(0,t.pageSize)}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},remoteMethod1:function(t){var e=this;""!==t?(this.loading3=!0,setTimeout(function(){e.loading3=!1,e.user=e.list},200)):this.user=[]},clear:function(){this.tableShow()},handSeek:function(){this.tableShow()},add:function(){this.modal3=!0,this.sheng()},chioce:function(t){this.cityListId=t.id,this.shengtype=t.type,this.shi()},sheng:function(){var t=this;this.$axios({url:"admin/user/adress",method:"get"}).then(function(e){t.cityList=e.data.table}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},chioce1:function(t){this.cityListId1=t.id,this.shitype=t.type,this.qu()},shi:function(){var t=this;this.$axios({method:"post",url:"admin/user/getRegion",data:this.$qs.stringify({id:this.cityListId,type:this.shengtype})}).then(function(e){t.cityList1=e.data}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},chioce2:function(t){this.cityListId2=t.id,this.qutype=t.type},qu:function(){var t=this;this.$axios({method:"post",url:"admin/user/getRegion",data:this.$qs.stringify({id:this.cityListId1,type:this.shitype})}).then(function(e){t.cityList2=e.data}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},handleBeforUpload:function(t){this.img.image=t},handleSuccess:function(t){this.url=t.url},ok3:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.$axios({method:"post",url:"admin/customer/insert",data:e.$qs.stringify({name:e.formAdd.name,phone:e.formAdd.phone,province:e.cityListId,city:e.cityListId1,area:e.cityListId2,address:e.formAdd.address,jwt:localStorage.getItem("jwt")})}).then(function(t){200===t.data.code?(e.tableShow(),e.modal3=!1,e.formAdd={}):400===t.data.code&&(e.modal3=!0,e.$Message.error("请输入正确的详细地址信息..."))}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),callback()):(e.loading=!1,e.$nextTick(function(){e.loading=!0}),e.$Message.error("新增失败，请填写完整的信息!"))}),this.tableShow(),this.formAdd={}},cancel3:function(){this.tableShow(),this.formAdd={}},xiugai:function(t){var e=this;this.modal1=!0,this.formItem=t,this.formItem.Id=t.Id,this.url1=t.img,this.$axios({url:"admin/user/adress",method:"get"}).then(function(t){e.cityList=t.data.table}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),this.$axios({method:"post",url:"admin/user/getRegion",data:this.$qs.stringify({id:t.provinceid,type:1})}).then(function(t){e.cityList1=t.data}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),this.$axios({method:"post",url:"admin/user/getRegion",data:this.$qs.stringify({id:t.cityid,type:2})}).then(function(t){e.cityList2=t.data}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),this.formItem.province=t.province,this.formItem.city=t.city,this.formItem.area=t.area,this.cityListId=t.provinceid,this.cityListId1=t.cityid,this.cityListId2=t.areaid},handleBeforUpload1:function(t){this.img1.image=t},handleSuccess1:function(t){this.url1=t.url},ok:function(t){var e=this;this.modal3=!1,this.$refs[t].validate(function(t){t?(e.$axios({method:"post",url:"admin/customer/upd",data:e.$qs.stringify({Id:e.formItem.Id,name:e.formItem.name,phone:e.formItem.phone,province:e.cityListId,city:e.cityListId1,area:e.cityListId2,address:e.formItem.address,jwt:localStorage.getItem("jwt")})}).then(function(t){e.modal3=!1,e.modal1=!1,e.tableShow()}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),callback()):(e.loading=!1,e.$nextTick(function(){e.loading=!0}),e.$Message.error("修改失败,请正确填写信息!"))}),this.tableShow()},cancel:function(){this.modal3=!1},close:function(){},map1:function(t){this.modal2=!0,this.center=[t.longitude,t.latitude],this.content=t.city+t.area+t.address},ok2:function(){this.tableShow()},cancel2:function(){this.tableShow()},event:function(){},manage:function(t){var e=this;this.$axios({method:"post",url:"admin/mail/insert",data:this.$qs.stringify({title:"收款提醒",main:"未交收款"+t.total+"元",jwt:localStorage.getItem("jwt")})}).then(function(t){e.tableShow(),e.modal3=!1,e.formAdd={}}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})},delete:function(t){var e=this;this.$Modal.confirm({title:"删除",content:"确认删除该条信息吗？",onOk:function(){e.$axios({method:"post",url:"admin/customer/delete",data:e.$qs.stringify({Id:t.Id,jwt:localStorage.getItem("jwt")})}).then(function(t){e.tableShow()}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})},onCancel:function(){e.$Message.info("取消")}})},changepage:function(t){this.page=t,this.tableShow();var e=(t-1)*this.pageSize,a=t*this.pageSize;this.data1=this.ajaxHistoryData.slice(e,a)}}}),r=n,s=(a("e7af"),a("2877")),c=Object(s["a"])(r,i,o,!1,null,"847856b6",null);e["default"]=c.exports},dd1d:function(t,e,a){},e7af:function(t,e,a){"use strict";var i=a("dd1d"),o=a.n(i);o.a}}]);
//# sourceMappingURL=chunk-137141b2.65af25b1.js.map