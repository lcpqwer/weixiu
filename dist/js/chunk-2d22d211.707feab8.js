(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d211"],{f5d0:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"info"},on:{click:t.add}},[t._v("新增")]),a("Input",{staticClass:"search-input",staticStyle:{width:"400px","margin-right":"3px"},attrs:{clearable:"",placeholder:"请输入优惠券关键字搜索"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("Button",{attrs:{type:"info"},on:{click:t.handSeek}},[t._v("搜索")]),a("Table",{staticStyle:{"margin-top":"10px"},attrs:{columns:t.columns1,data:t.data1}}),a("Modal",{attrs:{title:"新增",loading:t.loading},on:{"on-ok":function(e){t.ok3("formAdd")},"on-cancel":t.cancel3},model:{value:t.modal3,callback:function(e){t.modal3=e},expression:"modal3"}},[a("Form",{ref:"formAdd",attrs:{model:t.formAdd,"label-width":80,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"优惠券名称",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formAdd.name,callback:function(e){t.$set(t.formAdd,"name",e)},expression:"formAdd.name"}})],1),a("FormItem",{attrs:{label:"用户类型",prop:"type"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.formAdd.type,callback:function(e){t.$set(t.formAdd,"type",e)},expression:"formAdd.type"}},t._l(t.type,function(e){return a("Option",{key:e.value,attrs:{value:e.value},nativeOn:{click:function(a){t.chioce(e)}}},[t._v(t._s(e.label))])}))],1),t.modal3type?a("FormItem",{attrs:{label:"次数",prop:"number"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formAdd.number,callback:function(e){t.$set(t.formAdd,"number",e)},expression:"formAdd.number"}})],1):t._e(),a("FormItem",{attrs:{label:"折扣金额",prop:"price"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formAdd.price,callback:function(e){t.$set(t.formAdd,"price",e)},expression:"formAdd.price"}})],1),a("FormItem",{attrs:{label:"开始时间",prop:"startime"}},[a("Row",{model:{value:t.formAdd.startime,callback:function(e){t.$set(t.formAdd,"startime",e)},expression:"formAdd.startime"}},[a("Col",{attrs:{span:"12"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"请选择"},on:{"on-change":t.changedate}})],1)],1)],1),a("FormItem",{attrs:{label:"到期时间",prop:"outtime"}},[a("Row",{model:{value:t.formAdd.outtime,callback:function(e){t.$set(t.formAdd,"outtime",e)},expression:"formAdd.outtime"}},[a("Col",{attrs:{span:"12"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"请选择"},on:{"on-change":t.changedate1}})],1)],1)],1)],1)],1),a("Modal",{attrs:{title:"修改",loading:t.loading1},on:{"on-ok":function(e){t.ok("formItem")},"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":85,rules:t.ruleValidate2}},[a("FormItem",{attrs:{label:"用户类型",prop:"type"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},t._l(t.type,function(e){return a("Option",{key:e.value,attrs:{value:e.value},nativeOn:{click:function(a){t.chioce1(e)}}},[t._v(t._s(e.label))])}))],1),a("FormItem",{attrs:{label:"金额",prop:"price"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formItem.price,callback:function(e){t.$set(t.formItem,"price",e)},expression:"formItem.price"}})],1),a("FormItem",{attrs:{label:"次数",prop:"number"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formItem.number,callback:function(e){t.$set(t.formItem,"number",e)},expression:"formItem.number"}})],1),a("FormItem",{attrs:{label:"开始时间",prop:"startime"}},[a("Row",{model:{value:t.formItem.startime,callback:function(e){t.$set(t.formItem,"startime",e)},expression:"formItem.startime"}},[a("Col",{attrs:{span:"12"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"请选择"},on:{"on-change":t.changedate2}})],1)],1)],1),a("FormItem",{attrs:{label:"到期时间",prop:"outtime"}},[a("Row",{model:{value:t.formItem.outtime,callback:function(e){t.$set(t.formItem,"outtime",e)},expression:"formItem.outtime"}},[a("Col",{attrs:{span:"12"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"请选择"},on:{"on-change":t.changedate21}})],1)],1)],1),a("FormItem",{attrs:{label:"优惠码名称",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1)],1)],1),a("Modal",{attrs:{title:"发布"},on:{"on-ok":t.ok4,"on-cancel":t.cancel4},model:{value:t.modal4,callback:function(e){t.modal4=e},expression:"modal4"}},[a("Form",{attrs:{model:t.formfabu,"label-width":20}},[a("FormItem",[a("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"请输入达人关键字搜索"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),a("Button",{staticStyle:{"margin-top":"5px"},attrs:{type:"info"},on:{click:t.handSeek1}},[t._v("搜索")]),a("br"),a("Button",{staticStyle:{"margin-top":"5px","margin-right":"5px"},on:{click:function(e){t.handleSelectAll(!0)}}},[t._v("全选")]),a("Button",{staticStyle:{"margin-top":"5px"},on:{click:function(e){t.handleSelectAll(!1)}}},[t._v("取消")]),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns4,data:t.data2},on:{"on-select":t.select,"on-select-all":t.selectall}}),a("div",{staticStyle:{"text-align":"right"}},[a("Page",{staticClass:"paging",attrs:{total:t.dataCount1,"page-size":t.pageSize1,"show-total":""},on:{"on-change":t.changepage1}})],1)],1)],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("Page",{staticClass:"paging",attrs:{total:t.dataCount,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changepage}})],1)],1)},i=[],r=(a("7f7f"),{data:function(){var t=this;return{searchName:"",searchPhone:"",searchNum:"",ruleValidate:{name:[{required:!0,message:"不能为空",trigger:"blur"}],type:[{required:!0,message:"不能为空",trigger:"blur"}],number:[{required:!0,message:"不能为空",trigger:"blur"}],price:[{required:!0,message:"不能为空",trigger:"blur"}],startime:[{required:!0,message:"不能为空",trigger:"blur"}],outtime:[{required:!0,message:"不能为空",trigger:"blur"}]},ruleValidate2:{type:[{required:!0,message:"不能为空",trigger:"blur"}],price:[{required:!0,message:"不能为空",trigger:"blur"}],number:[{required:!0,message:"不能为空",trigger:"blur"}],startime:[{required:!0,message:"不能为空",trigger:"blur"}],outtime:[{required:!0,message:"不能为空",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"}]},searchValue:"",columns4:[{type:"selection",width:60,height:20,align:"center"},{title:"用户名",key:"name"},{title:"手机号",key:"phone"}],data2:[],type:[{value:"2",label:"指定用户"},{value:"1",label:"所有用户"}],date2:"",date21:"",adddate:"",adddate1:"",formfabu:{},formAdd:{type:"",number:"",price:"",outtime:"",name:"",jwt:localStorage.getItem("jwt")},formItem:{Id:"",code:"",type:"",price:"",time:"",number:"",startime:"",outtime:"",name:"",jwt:localStorage.getItem("jwt")},formImg:{Id:"",img:null,jwt:localStorage.getItem("jwt")},modal1:!1,modal2:!1,modal3:!1,modal4:!1,loading:!0,loading1:!0,modal3type:!0,ajaxHistoryData:[],dataCount:0,pageSize:10,page:1,ajaxHistoryData1:[],dataCount1:0,pageSize1:8,columns1:[{title:"优惠券名称",key:"name"},{title:"次数",key:"number"},{title:"折扣金额",key:"price"},{title:"类型",key:"typename"},{title:"状态",key:"statename"},{title:"创建时间",key:"time"},{title:"开始时间",key:"startime"},{title:"结束时间",key:"outtime"},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",marginBottom:"3px"},on:{click:function(){t.fabu(a.row)}}},"发布"),e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",marginBottom:"3px"},on:{click:function(){t.xiugai(a.row)}}},"修改"),e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",marginBottom:"3px"},attrs:{style:"background-color:#d6514d;border:1px solid #d6514d"},on:{click:function(){t.delete(a.row)}}},"删除")])}}],data1:[],data3:[],moneyId:""}},created:function(){this.tableShow()},methods:{tableShow:function(){var t=this;this.$axios({method:"post",url:"admin/coupon/show",data:this.$qs.stringify({name:this.searchValue,page:this.page,jwt:localStorage.getItem("jwt")})}).then(function(e){t.ajaxHistoryData=e.data.table,t.dataCount=e.data.count,e.data.count<t.pageSize?t.data1=e.data.table:t.data1=t.ajaxHistoryData.slice(0,t.pageSize)}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},add:function(){this.modal3=!0},changedate:function(t){this.adddate=t},changedate1:function(t){this.adddate1=t},chioce:function(t){this.formAdd.type=t.value,"1"===t.value?this.modal3type=!1:"2"===t.value&&(this.modal3type=!0)},ok3:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.$axios({method:"post",url:"admin/coupon/insert",data:e.$qs.stringify({number:e.formAdd.number,price:e.formAdd.price,startime:e.adddate,outtime:e.adddate1,name:e.formAdd.name,type:e.formAdd.type,jwt:localStorage.getItem("jwt")})}).then(function(t){e.tableShow(),e.modal3=!1,e.formAdd={}}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),callback()):(e.loading=!1,e.$nextTick(function(){e.loading=!0}),e.$Message.error("新增失败,请正确填写信息!"))}),this.tableShow(),this.formAdd={}},cancel3:function(){this.tableShow(),this.formAdd={}},handSeek:function(){this.tableShow()},handSeek1:function(){var t=this;this.$axios({method:"post",url:"admin/user/show",data:this.$qs.stringify({name:this.searchName,phone:this.searchPhone,number:this.searchNum,jwt:localStorage.getItem("jwt")})}).then(function(e){t.ajaxHistoryData1=e.data.table,t.dataCount1=e.data.table.length,e.data.table.length<t.pageSize1?t.data2=e.data.table:t.data2=t.ajaxHistoryData1.slice(0,t.pageSize1)}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},fabu:function(t){var e=this;this.moneyId=t.Id,1===t.type?(this.modal4=!1,this.$axios({method:"post",url:"admin/Coupon/release",data:this.$qs.stringify({Id:t.Id,jwt:localStorage.getItem("jwt")})}).then(function(t){e.$Message.success(t.data.msg),e.tableShow()}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})):2===t.type&&(this.modal4=!0,this.$axios({method:"post",url:"admin/user/show",data:this.$qs.stringify({jwt:localStorage.getItem("jwt")})}).then(function(t){e.ajaxHistoryData1=t.data.table,e.dataCount1=t.data.table.length,t.data.table.length<e.pageSize1?e.data2=t.data.table:e.data2=e.ajaxHistoryData1.slice(0,e.pageSize1)}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}))},select:function(t,e){this.data3.push(e.Id)},selectall:function(t){for(var e=0;e<t.length;e++)this.data3[e]=t[e].Id},handleSelectAll:function(t){this.$refs.selection.selectAll(t)},ok4:function(){var t=this;this.$axios({method:"post",url:"admin/Coupon/release",data:this.$qs.stringify({UId:this.data3,Id:this.moneyId,jwt:localStorage.getItem("jwt")})}).then(function(e){t.tableShow()}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},cancel4:function(){},xiugai:function(t){this.modal1=!0,this.formItem=t},chioce1:function(t){this.formItem.type=t.value,"1"===t.value?this.modal3type=!1:"2"===t.value&&(this.modal3type=!0)},changedate2:function(t){this.date2=t},changedate21:function(t){this.date21=t},changetime1:function(t){this.time=t},ok:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.$axios({method:"post",url:"admin/Coupon/upd",data:e.$qs.stringify({Id:e.formItem.Id,type:e.formItem.type,number:e.formItem.number,price:e.formItem.price,startime:e.date2,outtime:e.date21,name:e.formItem.name,jwt:localStorage.getItem("jwt")})}).then(function(t){e.modal3=!1,e.modal1=!1,e.tableShow()}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),callback()):(e.loading1=!1,e.$nextTick(function(){e.loading1=!0}),e.$Message.error("修改失败,请正确填写信息!"))})},cancel:function(){this.modal3=!1},delete:function(t){var e=this;this.$Modal.confirm({title:"删除",content:"确认删除该条信息吗？",onOk:function(){e.$axios({method:"post",url:"admin/coupon/delete",data:e.$qs.stringify({Id:t.Id,jwt:localStorage.getItem("jwt")})}).then(function(t){e.tableShow()}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})},onCancel:function(){e.$Message.info("取消")}})},changepage:function(t){this.page=t,this.tableShow();var e=(t-1)*this.pageSize,a=t*this.pageSize;this.data1=this.ajaxHistoryData.slice(e,a)},changepage1:function(t){var e=(t-1)*this.pageSize1,a=t*this.pageSize1;this.data2=this.ajaxHistoryData1.slice(e,a)}}}),n=r,l=a("2877"),s=Object(l["a"])(n,o,i,!1,null,"39b349be",null);e["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d22d211.707feab8.js.map