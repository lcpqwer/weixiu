(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08f662ec"],{"31f7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",{staticStyle:{float:"left","margin-right":"3px"}},[i("Col",{attrs:{span:"12"}},[i("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",remote:"",clearable:!0,placeholder:"请选择达人或输入达人名称","remote-method":t.remoteMethod3,loading:t.loading3},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}},t._l(t.user3,function(e,a){return i("Option",{key:a,staticStyle:{width:"100px"},attrs:{value:e.uid}},[t._v(t._s(e.name))])}))],1)],1),i("Select",{staticStyle:{width:"150px","margin-right":"3px"},attrs:{clearable:!0,placeholder:"请选择打卡状态"},model:{value:t.searchNum,callback:function(e){t.searchNum=e},expression:"searchNum"}},t._l(t.state,function(e){return i("Option",{key:e.Id,staticStyle:{width:"80px"},attrs:{value:e.label},nativeOn:{click:function(i){t.Schioce4(e)}}},[t._v(t._s(e.label))])})),i("Row",{staticStyle:{float:"left","margin-right":"3px"}},[i("Col",{attrs:{span:"12"}},[i("DatePicker",{staticStyle:{width:"150px","margin-right":"3px"},attrs:{type:"date",placeholder:"请选择日期"},on:{"on-change":t.changedateSou}})],1),i("Col",{attrs:{span:"12"}},[i("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"请选择时间"},on:{"on-change":t.changedateSou1}})],1)],1),i("Button",{attrs:{type:"info"},on:{click:t.handSeek}},[t._v("搜索")]),i("br"),i("Button",{staticStyle:{margin:"10px 0px 0px 0px","background-color":"#f39800",border:"1px solid #f39800"},attrs:{type:"info"}},[i("a",{staticStyle:{color:"#fff"},attrs:{href:t.href,download:"csv"},on:{click:t.daochuc}},[i("Icon",{attrs:{type:"ios-download-outline"}}),t._v("请选择订单CSV导出")],1)]),i("Table",{staticStyle:{"margin-top":"10px"},attrs:{columns:t.columns1,data:t.data1},on:{"on-select":t.select,"on-selection-change":t.selectChange}}),i("div",{staticStyle:{"text-align":"right"}},[i("Page",{staticClass:"paging",attrs:{total:t.dataCount,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changepage}})],1)],1)},r=[],s={data:function(){var t=this;return{user3:[],state:[{value:"1",label:"开始接单"},{value:"2",label:"结束接单"}],state4:"",list3:[],timeArry:[],list4:[],loading3:!1,loading4:!1,zoom:14,center:[121.6292529148,31.2035397816],ruleValidate:{uid:[{required:!0,message:"不能为空",trigger:"blur"}],time:[{required:!0,message:"不能为空",trigger:"blur"}],state:[{required:!0,message:"不能为空",trigger:"blur"}],img:[{required:!0,message:"不能为空",trigger:"blur"}],province:[{required:!0,message:"不能为空",trigger:"blur"}],city:[{required:!0,message:"不能为空",trigger:"blur"}],area:[{required:!0,message:"不能为空",trigger:"blur"}],address:[{required:!0,message:"不能为空",trigger:"blur"}]},ruleValidate2:{uid:[{required:!0,message:"不能为空",trigger:"blur"}],time:[{required:!0,message:"不能为空",trigger:"blur"}],state:[{required:!0,message:"不能为空",trigger:"blur"}],img:[{required:!0,message:"不能为空",trigger:"blur"}],province:[{required:!0,message:"不能为空",trigger:"blur"}],city:[{required:!0,message:"不能为空",trigger:"blur"}],area:[{required:!0,message:"不能为空",trigger:"blur"}],address:[{required:!0,message:"不能为空",trigger:"blur"}]},searchName:"",searchNum:"",searchPhone:"",cityList:[],cityList1:[],cityList2:[],cityListId:"",cityListId1:"",cityListId2:"",csvArry:"",csv:[],href:"",formAdd:{uid:"",time:"",state:"",img:"",province:"",city:"",area:"",address:"",longitude:"",latitude:"",jwt:localStorage.getItem("jwt")},formItem:{Id:"",name:"",phone:"",grade:"",arrangement:"",total:"",quota:"",city:"",pass:"",provinceid:"",cityid:"",areaid:"",jwt:localStorage.getItem("jwt")},formImg:{Id:"",img:null,jwt:localStorage.getItem("jwt")},modal1:!1,modal2:!1,modal3:!1,loading:!0,loading1:!0,ajaxHistoryData:[],dataCount:0,pageSize:10,page:1,columns1:[{type:"selection",width:60,height:20,align:"center"},{title:"用户姓名",key:"name"},{title:"打卡日期",key:"time"},{title:"打卡地址",key:"address"},{title:"自拍照",key:"img",render:function(t,e){return t("img",{style:{width:"100px",height:"100px"},attrs:{src:e.row.img,style:"width: 100px;height: 100px;margin: auto"}})}},{title:"考勤状态",key:"state",render:function(t,e){return t("Tag",{props:{color:1===e.row.state?"green":2===e.row.state?"orange":""}},1===e.row.state?"上班打卡":2===e.row.state?"下班打卡":"")}},{title:"操作",key:"action",align:"center",render:function(e,i){return e("div",[e("Tag",{props:{size:"small",color:1===i.row.state?"green":"gray"},style:{marginRight:"5px",marginBottom:"5px"},nativeOn:{click:function(){t.bohui(i.row)}}},1===i.row.state?"驳回":"无法驳回"),e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",marginBottom:"5px"},attrs:{style:"background-color:#d6514d;border:1px solid #d6514d"},on:{click:function(){t.delete(i.row)}}},"删除")])}}],data1:[]}},created:function(){this.tableShow()},methods:{select:function(t){},selectChange:function(t){this.csvArry="";for(var e=0;e<t.length;e++)this.csv[e]=t[e].Id,this.csvArry+="Id["+e+"]="+this.csv[e],e!=t.length-1&&(this.csvArry=this.csvArry+"&&");this.href="http://192.168.8.107/repair/public/admin/Attendance/csv?"+this.csvArry},daochuc:function(){var t=this;this.$axios({method:"post",url:"admin/Attendance/csv",data:this.$qs.stringify({Id:this.csv,jwt:localStorage.getItem("jwt")})}).then(function(t){}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},bohui:function(t){var e=this;1===t.state&&this.$axios({method:"post",url:"admin/Attendance/reject",data:this.$qs.stringify({Id:t.Id,jwt:localStorage.getItem("jwt")})}).then(function(t){e.tableShow(),e.$Message.success("驳回成功")}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})},tableShow:function(){var t=this;this.$axios({method:"post",url:"admin/attendance/show",data:this.$qs.stringify({uid:this.searchName,state:this.state4,page:this.page,time:this.timeArry,jwt:localStorage.getItem("jwt")})}).then(function(e){t.ajaxHistoryData=e.data.table,t.user3=e.data.table,t.dataCount=e.data.count,e.data.count<t.pageSize?t.data1=e.data.table:t.data1=t.ajaxHistoryData.slice(0,t.pageSize)}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},remoteMethod3:function(t){var e=this;""!==t?(this.loading3=!0,setTimeout(function(){e.loading3=!1,e.user3=e.list3},200)):this.user3=[]},changedateSou:function(t){this.timeArry[0]=t},changedateSou1:function(t){this.adddate1=t,this.timeArry[1]=t},Schioce4:function(t){this.state4=t.value},handSeek:function(){this.tableShow()},add:function(){var t=this;this.modal3=!0,this.$axios({url:"admin/user/adress",method:"get"}).then(function(e){t.cityList=e.data.table}).catch(function(e){t.$Message.error("请求超时,请稍后再试...")})},chioce:function(t){var e=this;this.cityListId=t.id,this.$axios({method:"post",url:"admin/user/getRegion",data:this.$qs.stringify({id:t.id,type:t.type})}).then(function(t){e.cityList1=t.data}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})},chioce1:function(t){var e=this;this.cityListId1=t.id,this.$axios({method:"post",url:"admin/user/getRegion",data:this.$qs.stringify({id:t.id,type:t.type})}).then(function(t){e.cityList2=t.data}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})},chioce2:function(t){this.cityListId2=t.id},ok3:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.$axios({method:"post",url:"admin/user/insert",data:e.$qs.stringify({uid:e.formItem.uid,time:e.formItem.time,state:e.formItem.state,img:e.formItem.img,province:e.cityListId,city:e.cityListId1,area:e.cityListId2,address:e.formItem.address,jwt:localStorage.getItem("jwt")})}).then(function(t){e.tableShow(),e.modal3=!1,e.formAdd={}}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),callback()):(e.loading=!1,e.$nextTick(function(){e.loading=!0}),e.$Message.error("新增失败，请填写完整的信息!"))}),this.tableShow(),this.formAdd={}},cancel3:function(){},buka:function(t){this.modal1=!0,this.formItem=t,this.add(),this.chioce(),this.chioce1(),this.chioce2()},ok:function(t){var e=this;this.modal3=!1,this.$refs[t].validate(function(t){t?(e.$axios({method:"post",url:"admin/user/upd",data:e.$qs.stringify({uid:e.formItem.uid,time:e.formItem.time,state:e.formItem.state,img:e.formItem.img,province:e.cityListId,city:e.cityListId1,area:e.cityListId2,address:e.formItem.address,jwt:localStorage.getItem("jwt")})}).then(function(t){e.modal3=!1,e.modal1=!1,e.tableShow()}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")}),callback()):(e.loading=!1,e.$nextTick(function(){e.loading=!0}),e.$Message.error("修改失败,请正确填写信息!"))}),this.tableShow()},cancel:function(){this.modal3=!1},xiugaiimg:function(t){this.modal2=!0,this.formImg.Id=t.Id},handleUpload:function(t){this.formImg.img=t},handleSuccess:function(t,e,i){200===t.code&&(this.modal2=!1,this.tableShow())},delete:function(t){var e=this;this.$Modal.confirm({title:"删除",content:"确认删除该条信息吗？",onOk:function(){e.$axios({method:"post",url:"admin/attendance/delete",data:e.$qs.stringify({Id:t.Id,jwt:localStorage.getItem("jwt")})}).then(function(t){e.tableShow()}).catch(function(t){e.$Message.error("请求超时,请稍后再试...")})},onCancel:function(){e.$Message.info("取消")}})},changepage:function(t){this.page=t,this.tableShow();var e=(t-1)*this.pageSize,i=t*this.pageSize;this.data1=this.ajaxHistoryData.slice(e,i)}}},o=s,n=(i("881c"),i("2877")),c=Object(n["a"])(o,a,r,!1,null,"ecc8c5c6",null);e["default"]=c.exports},"87cf":function(t,e,i){},"881c":function(t,e,i){"use strict";var a=i("87cf"),r=i.n(a);r.a}}]);
//# sourceMappingURL=chunk-08f662ec.44ea7443.js.map