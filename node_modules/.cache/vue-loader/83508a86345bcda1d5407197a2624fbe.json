{"remainingRequest":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/szt/Desktop/iview-admin/src/view/orderManagemnet/o_management.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/szt/Desktop/iview-admin/src/view/orderManagemnet/o_management.vue","mtime":1562820883000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport tableDetail from './tableDetail.vue'\nexport default {\n  components: { tableDetail },\n  data () {\n    const validatePhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('手机号不能为空'));\n      } else if (!/^1[34578]\\d{9}$/.test(value)) {\n        callback('手机号格式不正确');\n      } else {\n        callback();\n      }\n    };\n    const validatePass = (rule, value, callback) => {\n      // 此时便能打印value值查看\n      console.log(value,'打印值')\n    };\n    return {\n      adddate:'',\n      state:[\n        {\n          value: '1',\n          label: '上门'\n        },\n        {\n          value: '2',\n          label: '到店'\n        },\n        {\n          value: '3',\n          label: '售后'\n        }\n      ],\n      type:[\n        {\n          value: '1',\n          label: '开始'\n        },\n        {\n          value: '2',\n          label: '进行'\n        },\n        {\n          value: '3',\n          label: '结束'\n        },\n        {\n          value: '4',\n          label: '疑难'\n        }\n      ],\n      file:'',\n      ruleValidate: {\n        name: [\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        phone: [\n          // { required: true, message: '不能为空', trigger: 'blur' },\n          {type: 'number',required:true,validator:validatePhone,message:'请输入正确的手机号',trigger:'change'}\n        ],\n        grade: [\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        arrangement:[\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        total: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        quota: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        provinceid: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        cityid: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        areaid: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ]\n      },\n      ruleValidate2: {\n        name: [\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        phone: [\n          // { required: true, message: '不能为空', trigger: 'blur' },\n          {type: 'number',required:true,validator:validatePhone,message:'请输入正确的手机号',trigger:'change'}\n        ],\n        grade: [\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        arrangement:[\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        total: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        quota: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        pass: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        provinceid: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        cityid: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        areaid: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ]\n      },\n      searchName:'',\n      searchNum:'',\n      searchPhone:'',\n      cityList:[],\n      cityList1:[],\n      cityList2:[],\n      cityListId:'',\n      cityListId1:'',\n      cityListId2:'',\n      pinpai:[],\n      jixing:[],\n      shebei:[],\n      Npinpai:'',\n      Njixing:'',\n      Nshebei:'',\n      formAdd:{\n        name:'',\n        phone:'',\n        grade:'',\n        arrangement:'',\n        total:'',\n        quota:'',\n        cityid:'',\n        provinceid:'',\n        areaid:'',\n        jwt:localStorage.getItem('jwt')\n      },\n      formItem:{\n        Id:'',\n        name:'',\n        phone:'',\n        grade:'',\n        arrangement:'',\n        total:'',\n        quota:'',\n        city:'',\n        pass:'',\n        provinceid:'',\n        cityid:'',\n        areaid:'',\n        jwt:localStorage.getItem('jwt')\n      },\n      formImg:{\n        Id:\"\",\n        img:null,\n        jwt:localStorage.getItem('jwt')\n      },\n      modal1: false,\n      modal2: false,\n      modal3:false,\n      loading: true,\n      loading1: true,\n      //    分页\n      ajaxHistoryData: [],\n      // 初始化信息总条数\n      dataCount: 0,\n      // 每页显示多少条\n      pageSize: 5,\n      columns1: [\n        {\n          type: 'selection',\n          width: 60,\n          height: 20,\n          align: 'center'\n        },\n        {\n          title: '详情',\n          type: 'expand',\n          width: 70,\n          render: (h, params) => {\n            return h(tableDetail, {\n              props: {\n                row: params.row\n              }\n            })\n          }\n        },\n        {\n          title: '订单类型',\n          key: 'state',\n          render: (h, params) => {\n            return h('Tag', {\n              props: {\n                color: params.row.state === 1 ? 'green' : params.row.state === 2 ? 'orange' : params.row.state === 3 ? 'red': params.row.state === 4 ? 'gray':''\n              }\n            }, params.row.state === 1 ? '上门' : params.row.state === 2 ? '到店' : params.row.state === 3 ? '售后' : params.row.state === 4 ? '疑难' : '');\n          }\n        },\n        {\n          title: '订单状态',\n          key: 'type',\n          render: (h, params) => {\n            return h('Tag', {\n              props: {\n                color: params.row.type === 1 ? 'green' : params.row.type === 2 ? 'red' : params.row.type === 3 ? 'orange':''\n              }\n            }, params.row.type === 1 ? '开始' : params.row.type === 2 ? '进行' : params.row.type === 3 ? '结束' : '');\n          }\n        },\n        {\n          title: '商品名称',\n          key: 'payname'\n        },\n        {\n          title: '预约金额',\n          key: 'total'\n        },\n        {\n          title: '预约时间',\n          key: 'appointment_time',\n          width: 150\n        },\n        {\n          title: '编码',\n          key: 'number',\n          width: 150\n        },\n        {\n          title: '用户手机号',\n          key: 'userphone',\n          width: 150\n        },\n        {\n          title: '维修手机号',\n          key: 'phone',\n        },\n        {\n          title: '操作',\n          key: 'action',\n          align: 'center',\n          render: (h, params) => {\n            return h('div', [\n              h('Button', {\n                props: {\n                  type: 'info',\n                  size: 'small'\n                },\n                style: {\n                  marginRight: '5px',\n                  marginBottom: '5px'\n                },\n                on: {\n                  click: () => {\n                    this.xiugai(params.row);\n                  }\n                }\n              }, '修改'),\n              h('Button', {\n                props: {\n                  type: 'info',\n                  size: 'small'\n                },\n                style: {\n                  marginRight: '5px',\n                  marginBottom: '5px'\n                },\n                on: {\n                  click: () => {\n                    this.delete(params.row);\n                  }\n                }\n              }, '删除'),\n            ]);\n          }\n        }\n      ],\n      data1: []\n    }\n  },\n  created() {\n    // console.log(localStorage.getItem('jwt'))\n    this.tableShow()\n  },\n  methods: {\n    //复选框\n    handleSelectAll (status) {\n      this.$refs.selection.selectAll(status);\n      alert(this.$refs.selection)\n    },\n    //用户信息展示\n    tableShow(){\n      this.$axios({\n        method: 'post',\n        url: 'admin/order/show',\n        data: this.$qs.stringify({\n          uid:this.searchName,\n          phone:this.searchPhone,\n          state:this.searchNum,\n          type:this.searchNum,\n          time:this.searchNum,\n          jwt: localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        console.log(res.data.table,'用户信息')\n        this.ajaxHistoryData = res.data.table;\n        this.dataCount = res.data.table.length;\n        // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n        if (res.data.table.length < this.pageSize) {\n          // this.historyData = this.ajaxHistoryData;\n          this.data1 = res.data.table\n        } else {\n          this.data1 = this.ajaxHistoryData.slice(0, this.pageSize);\n        }\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    //搜索\n    handSeek(){\n      this.tableShow()\n    },\n    //新增\n    add(){\n      this.modal3=true\n      //省联动\n      this.$axios({\n        url: 'admin/user/adress',\n        method: 'get',\n      }).then(res => {\n        // console.log(res,'12345')\n        this.cityList = res.data.table\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...')\n      });\n      //品牌联动\n      this.$axios({\n        url: 'admin/order/brand',\n        method: 'get',\n      }).then(res => {\n        console.log(res,'12345')\n        this.pinpai = res.data.table\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...')\n      });\n    },\n    //省联动\n    chioce(item){\n      this.cityListId=item.id\n      this.$axios({\n        method: 'post',\n        url: 'admin/user/getRegion',\n        data: this.$qs.stringify({\n          id: item.id,\n          type: item.type\n          // jwt:localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res,'市三级联动')\n        this.cityList1=res.data\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    //市联动\n    chioce1(item){\n      // console.log(JSON.stringify(item),'12345')\n      this.cityListId1=item.id\n      this.$axios({\n        method: 'post',\n        url: 'admin/user/getRegion',\n        data: this.$qs.stringify({\n          id: item.id,\n          type: item.type\n          // jwt:localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res,'市三级联动')\n        this.cityList2=res.data\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    //区联动\n    chioce2(item){\n      this.cityListId2=item.id\n    },\n    //品牌\n    chioce3(item){\n      // console.log(item,'品牌1')\n      this.Npinpai=item.laptop_name\n      this.$axios({\n        method: 'post',\n        url: 'admin/order/version',\n        data: this.$qs.stringify({\n          // id: item.id,\n          laptop_name: item.laptop_name\n          // jwt:localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res,'品牌2')\n        this.jixing=res.data.table\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    //机型\n    chioce4(item){\n      // console.log(item,'机型1')\n      this.Njixing=item.series_name\n      this.$axios({\n        method: 'post',\n        url: 'admin/order/equipment',\n        data: this.$qs.stringify({\n          // id: item.id,\n          series_name: item.series_name\n          // jwt:localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res,'机型2')\n        this.shebei=res.data.table\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    //设备\n    chioce5(item){\n      this.Nshebei=item.juti_name\n    },\n    chioce6(item){\n      // console.log(item,'订单类型')\n      this.formAdd.state = item.value\n    },\n    chioce7(item){\n      // console.log(item,'订单状态')\n      this.formAdd.type = item.value\n    },\n\n    changetime(res){\n      console.log(res,'分钟时间内')\n      this.adddate=res\n    },\n    ok3 (formAdd) {\n      // console.log(this.$nextTick,'验证')\n      this.$refs[formAdd].validate((valid) => {\n        if (valid) {\n          this.$axios({\n            method: 'post',\n            url: 'admin/user/insert',\n            data: this.$qs.stringify({\n              name: this.formAdd.name,\n              phone: this.formAdd.phone,\n              grade: this.formAdd.grade,\n              arrangement: this.formAdd.arrangement,\n              total: this.formAdd.total,\n              quota: this.formAdd.quota,\n              provinceid: this.cityListId,\n              cityid: this.cityListId1,\n              areaid:this.cityListId2,\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res,'用户增加')\n            this.tableShow()\n            this.modal3 = false\n            this.formAdd = {}\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n          callback();\n        } else{\n          this.loading = false;\n          this.$nextTick(() => {\n            this.loading = true;\n          });\n          this.$Message.error('新增失败，请填写完整的信息!');\n        }\n      })\n      this.tableShow()\n      this.formAdd = {}\n    },\n    cancel3 () {\n      // this.$Message.info('Clicked cancel');\n    },\n    //用户修改\n    xiugai(row){\n      // console.log(row)\n      this.modal1=true\n      this.formItem=row\n      this.formItem.Id=row.Id\n      this.formItem.cityid=row.cityid\n      this.add()\n      this.chioce()\n      this.chioce1()\n      this.chioce2()\n    },\n    ok (formItem) {\n      // console.log(this.$refs[formItem])\n      this.modal3=false\n      this.$refs[formItem].validate((valid) => {\n        if (valid) {\n          this.$axios({\n            method: 'post',\n            url: 'admin/user/upd',\n            data: this.$qs.stringify({\n              Id:this.formItem.Id,\n              name:this.formItem.name,\n              phone: this.formItem.phone,\n              grade: this.formItem.grade,\n              arrangement: this.formItem.arrangement,\n              total: this.formItem.total,\n              quota: this.formItem.quota,\n              pass: this.formItem.pass,\n              provinceid: this.cityListId,\n              cityid: this.cityListId1,\n              areaid:this.cityListId2,\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res,'用户修改')\n            this.modal3=false\n            this.modal1=false\n            this.tableShow()\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n          callback();\n        } else{\n          this.loading = false;\n          this.$nextTick(() => {\n            this.loading = true;\n          });\n          this.$Message.error('修改失败,请正确填写信息!');\n        }\n      })\n      this.tableShow()\n    },\n    cancel () {\n      this.modal3=false\n      // this.$Message.info('Clicked cancel');\n    },\n    // 修改上传图片\n    xiugaiimg(row){\n      // console.log(row)\n      this.modal2=true\n      // this.formImg=row\n      this.formImg.Id=row.Id\n    },\n    handleBeforUpload (file) {\n      // this.formImg.img = file;\n      this.file = file  // 将回调的文件信息存入data.file\n      return false\n    },\n    handleSuccess (response, file, fileList) {\n      if(response.code === 200){\n        this.modal2=false\n        this.tableShow()\n      }\n    },\n    //删除\n    delete(row){\n      // console.log(row)\n      this.$Modal.confirm({\n        title: '删除',\n        content: '确认删除该条信息吗？',\n        onOk: () => {\n          this.$axios({\n            method: 'post',\n            url: 'admin/order/delete',\n            data: this.$qs.stringify({\n              Id: row.Id,\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            this.tableShow()\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n        },\n        onCancel: () => {\n          this.$Message.info('取消');\n        }\n      });\n    },\n    //分页\n    changepage (index) {\n      var _start = (index - 1) * this.pageSize;\n      var _end = index * this.pageSize;\n      this.data1 = this.ajaxHistoryData.slice(_start, _end);\n    }\n  }\n}\n",{"version":3,"sources":["o_management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"o_management.vue","sourceRoot":"src/view/orderManagemnet","sourcesContent":["<template>\n  <div>\n    <Button style=\"margin-left: 10px;margin-right: 5px\" type=\"info\" @click=\"add\">新增</Button>\n    <!--搜索-->\n    <Input clearable placeholder=\"请输入用户名关键字搜索\" class=\"search-input\" v-model=\"searchName\" style=\"width: 200px\"/>\n    <Input clearable placeholder=\"请输入工号关键字搜索\" class=\"search-input\" v-model=\"searchNum\" style=\"width: 200px\"/>\n    <Input clearable placeholder=\"请输入手机号关键字搜索\" class=\"search-input\" v-model=\"searchPhone\" style=\"width: 200px\"/>\n    <Input clearable placeholder=\"请输入工号关键字搜索\" class=\"search-input\" v-model=\"searchNum\" style=\"width: 200px\"/>\n    <Input clearable placeholder=\"请输入手机号关键字搜索\" class=\"search-input\" v-model=\"searchPhone\" style=\"width: 200px\"/>\n    <Button type=\"info\" @click=\"handSeek\">搜索</Button>\n    <br>\n    <Button @click=\"handleSelectAll(true)\" style=\"margin:5px 5px 0px 10px\">全选</Button>\n    <Button @click=\"handleSelectAll(false)\" style=\"margin-top: 5px\">取消</Button>\n    <Table border ref=\"selection\" :columns=\"columns1\" :data=\"data1\"></Table>\n\n    <!--新增-->\n    <Modal\n      v-model=\"modal3\"\n      title=\"新增用户信息\"\n      @on-ok=\"ok3('formAdd')\"\n      @on-cancel=\"cancel3\"\n      :loading=\"loading\">\n      <Form :model=\"formAdd\" :label-width=\"80\" :rules=\"ruleValidate\" ref=\"formAdd\">\n        <FormItem label=\"用户ID\" prop=\"uid\">\n          <Input v-model=\"formAdd.uid\" placeholder=\"\" :maxlength='16'></Input>\n        </FormItem>\n        <FormItem label=\"手机号\" prop=\"userphone\">\n          <Input v-model=\"formAdd.userphone\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"优惠券ID\" prop=\"couponId\">\n          <Input v-model=\"formAdd.couponId\" placeholder=\"\" number></Input>\n        </FormItem>\n        <FormItem label=\"具体故障\" prop=\"specific\">\n          <Input v-model=\"formAdd.specific\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"维修方案\" prop=\"programme\">\n          <Input v-model=\"formAdd.programme\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"省份\" prop=\"provinceid\">\n          <Select v-model=\"formAdd.provinceid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"城市\" prop=\"cityid\">\n          <Select v-model=\"formAdd.cityid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList1\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce1(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"地区\" prop=\"areaid\">\n          <Select v-model=\"formAdd.areaid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList2\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce2(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"详细地址\" prop=\"address\">\n          <Input v-model=\"formAdd.address\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"客服备注\" prop=\"customer_service\">\n          <Input v-model=\"formAdd.customer_service\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"维修金额\" prop=\"total\">\n          <Input v-model=\"formAdd.total\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"订单类型\" prop=\"state\">\n          <Select v-model=\"formAdd.state\" style=\"width:200px\">\n            <Option v-for=\"item in state\" :value=\"item.value\" :key=\"item.value\" @click.native=\"chioce6(item)\">{{ item.label }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"预约时间\" prop=\"appointment_time\">\n          <Row v-model=\"formAdd.appointment_time\">\n            <Col span=\"12\">\n              <DatePicker type=\"date\" placeholder=\"请选择日期\" style=\"width: 180px\" @on-change=\"changedate\"></DatePicker>\n            </Col>\n            <Col span=\"12\">\n              <TimePicker type=\"time\" placeholder=\"请选择时间\" style=\"width: 180px\" @on-change=\"changetime\"></TimePicker>\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem label=\"品牌\" prop=\"brand\">\n          <Select v-model=\"formAdd.brand\" style=\"width:200px\">\n            <Option v-for=\"item in pinpai\" :value=\"item.laptop_name\" :key=\"item.id\" @click.native=\"chioce3(item)\">{{ item.laptop_name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formItem.brand\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"机型\" prop=\"version\">\n          <Select v-model=\"formAdd.version\" style=\"width:200px\">\n            <Option v-for=\"item in jixing\" :value=\"item.series_name\" :key=\"item.id\" @click.native=\"chioce4(item)\">{{ item.series_name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formItem.version\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"设备\" prop=\"equipment\">\n          <Select v-model=\"formAdd.equipment\" style=\"width:200px\">\n            <Option v-for=\"item in shebei\" :value=\"item.juti_name\" :key=\"item.id\" @click.native=\"chioce5(item)\">{{ item.juti_name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formItem.equipment\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"图片\" prop=\"customer_img\">\n          <Input v-model=\"formAdd.customer_img\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"订单状态\" prop=\"type\">\n          <Select v-model=\"formAdd.type\" style=\"width:200px\">\n            <Option v-for=\"item in type\" :value=\"item.value\" :key=\"item.value\" @click.native=\"chioce7(item)\">{{ item.label }}</Option>\n          </Select>\n          <!--<Input v-model=\"formAdd.type\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"支付方式\" prop=\"payid\">\n          <Select v-model=\"formAdd.payid\" style=\"width:200px\">\n            <Option v-for=\"item in payid\" :value=\"item.value\" :key=\"item.value\" @click.native=\"chioce8(item)\">{{ item.label }}</Option>\n          </Select>\n          <!--<Input v-model=\"formAdd.payid\" placeholder=\"\"></Input>-->\n        </FormItem>\n      </Form>\n    </Modal>\n    <!--//修改弹框-->\n    <!--<Button type=\"primary\" @click=\"modal1 = true\">修改</Button>-->\n    <Modal\n      v-model=\"modal1\"\n      title=\"修改用户信息\"\n      @on-ok=\"ok('formItem')\"\n      @on-cancel=\"cancel\"\n      :loading=\"loading1\">\n      <Form :model=\"formItem\" :label-width=\"80\" :rules=\"ruleValidate2\" ref=\"formItem\">\n        <FormItem label=\"用户ID\" prop=\"uid\">\n          <Input v-model=\"formItem.uid\" placeholder=\"\" :maxlength='16'></Input>\n        </FormItem>\n        <FormItem label=\"优惠券ID\" prop=\"couponId\">\n          <Input v-model=\"formItem.couponId\" placeholder=\"\" number></Input>\n        </FormItem>\n        <FormItem label=\"具体故障\" prop=\"specific\">\n          <Input v-model=\"formItem.specific\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"维修方案\" prop=\"programme\">\n          <Input v-model=\"formItem.programme\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"省份\" prop=\"provinceid\">\n          <Select v-model=\"formItem.provinceid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"城市\" prop=\"cityid\">\n          <Select v-model=\"formItem.cityid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList1\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce1(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"地区\" prop=\"areaid\">\n          <Select v-model=\"formItem.areaid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList2\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce2(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"详细地址\" prop=\"address\">\n          <Input v-model=\"formItem.address\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"客服备注\" prop=\"customer_service\">\n          <Input v-model=\"formItem.customer_service\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"维修金额\" prop=\"total\">\n          <Input v-model=\"formItem.total\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"订单类型\" prop=\"state\">\n          <Input v-model=\"formItem.state\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"预约时间\" prop=\"appointment_time\">\n          <Input v-model=\"formItem.appointment_time\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"品牌\" prop=\"brand\">\n          <Select v-model=\"formItem.provinceid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList\" :value=\"item.id\" :key=\"item.id\" @click.native=\"chioce3(item)\">{{ item.name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formItem.brand\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"机型\" prop=\"version\">\n          <Select v-model=\"formItem.provinceid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList\" :value=\"item.id\" :key=\"item.id\" @click.native=\"chioce4(item)\">{{ item.name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formItem.version\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"设备\" prop=\"equipment\">\n          <Select v-model=\"formItem.provinceid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList\" :value=\"item.id\" :key=\"item.id\" @click.native=\"chioce5(item)\">{{ item.name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formItem.equipment\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"图片\" prop=\"customer_img\">\n          <Input v-model=\"formItem.customer_img\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"手机号\" prop=\"userphone\">\n          <Input v-model=\"formItem.userphone\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"订单状态\" prop=\"type\">\n          <Input v-model=\"formItem.type\" placeholder=\"\"></Input>\n        </FormItem>\n      </Form>\n    </Modal>\n    <!--//分页-->\n    <div style=\"text-align: right\">\n      <Page :total=\"dataCount\" :page-size=\"pageSize\" show-total class=\"paging\" @on-change=\"changepage\"></Page>\n    </div>\n  </div>\n</template>\n\n<script>\n  import tableDetail from './tableDetail.vue'\n  export default {\n    components: { tableDetail },\n    data () {\n      const validatePhone = (rule, value, callback) => {\n        if (!value) {\n          return callback(new Error('手机号不能为空'));\n        } else if (!/^1[34578]\\d{9}$/.test(value)) {\n          callback('手机号格式不正确');\n        } else {\n          callback();\n        }\n      };\n      const validatePass = (rule, value, callback) => {\n        // 此时便能打印value值查看\n        console.log(value,'打印值')\n      };\n      return {\n        adddate:'',\n        state:[\n          {\n            value: '1',\n            label: '上门'\n          },\n          {\n            value: '2',\n            label: '到店'\n          },\n          {\n            value: '3',\n            label: '售后'\n          }\n        ],\n        type:[\n          {\n            value: '1',\n            label: '开始'\n          },\n          {\n            value: '2',\n            label: '进行'\n          },\n          {\n            value: '3',\n            label: '结束'\n          },\n          {\n            value: '4',\n            label: '疑难'\n          }\n        ],\n        file:'',\n        ruleValidate: {\n          name: [\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          phone: [\n            // { required: true, message: '不能为空', trigger: 'blur' },\n            {type: 'number',required:true,validator:validatePhone,message:'请输入正确的手机号',trigger:'change'}\n          ],\n          grade: [\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          arrangement:[\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          total: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          quota: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          provinceid: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          cityid: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          areaid: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ]\n        },\n        ruleValidate2: {\n          name: [\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          phone: [\n            // { required: true, message: '不能为空', trigger: 'blur' },\n            {type: 'number',required:true,validator:validatePhone,message:'请输入正确的手机号',trigger:'change'}\n          ],\n          grade: [\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          arrangement:[\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          total: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          quota: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          pass: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          provinceid: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          cityid: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          areaid: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ]\n        },\n        searchName:'',\n        searchNum:'',\n        searchPhone:'',\n        cityList:[],\n        cityList1:[],\n        cityList2:[],\n        cityListId:'',\n        cityListId1:'',\n        cityListId2:'',\n        pinpai:[],\n        jixing:[],\n        shebei:[],\n        Npinpai:'',\n        Njixing:'',\n        Nshebei:'',\n        formAdd:{\n          name:'',\n          phone:'',\n          grade:'',\n          arrangement:'',\n          total:'',\n          quota:'',\n          cityid:'',\n          provinceid:'',\n          areaid:'',\n          jwt:localStorage.getItem('jwt')\n        },\n        formItem:{\n          Id:'',\n          name:'',\n          phone:'',\n          grade:'',\n          arrangement:'',\n          total:'',\n          quota:'',\n          city:'',\n          pass:'',\n          provinceid:'',\n          cityid:'',\n          areaid:'',\n          jwt:localStorage.getItem('jwt')\n        },\n        formImg:{\n          Id:\"\",\n          img:null,\n          jwt:localStorage.getItem('jwt')\n        },\n        modal1: false,\n        modal2: false,\n        modal3:false,\n        loading: true,\n        loading1: true,\n        //    分页\n        ajaxHistoryData: [],\n        // 初始化信息总条数\n        dataCount: 0,\n        // 每页显示多少条\n        pageSize: 5,\n        columns1: [\n          {\n            type: 'selection',\n            width: 60,\n            height: 20,\n            align: 'center'\n          },\n          {\n            title: '详情',\n            type: 'expand',\n            width: 70,\n            render: (h, params) => {\n              return h(tableDetail, {\n                props: {\n                  row: params.row\n                }\n              })\n            }\n          },\n          {\n            title: '订单类型',\n            key: 'state',\n            render: (h, params) => {\n              return h('Tag', {\n                props: {\n                  color: params.row.state === 1 ? 'green' : params.row.state === 2 ? 'orange' : params.row.state === 3 ? 'red': params.row.state === 4 ? 'gray':''\n                }\n              }, params.row.state === 1 ? '上门' : params.row.state === 2 ? '到店' : params.row.state === 3 ? '售后' : params.row.state === 4 ? '疑难' : '');\n            }\n          },\n          {\n            title: '订单状态',\n            key: 'type',\n            render: (h, params) => {\n              return h('Tag', {\n                props: {\n                  color: params.row.type === 1 ? 'green' : params.row.type === 2 ? 'red' : params.row.type === 3 ? 'orange':''\n                }\n              }, params.row.type === 1 ? '开始' : params.row.type === 2 ? '进行' : params.row.type === 3 ? '结束' : '');\n            }\n          },\n          {\n            title: '商品名称',\n            key: 'payname'\n          },\n          {\n            title: '预约金额',\n            key: 'total'\n          },\n          {\n            title: '预约时间',\n            key: 'appointment_time',\n            width: 150\n          },\n          {\n            title: '编码',\n            key: 'number',\n            width: 150\n          },\n          {\n            title: '用户手机号',\n            key: 'userphone',\n            width: 150\n          },\n          {\n            title: '维修手机号',\n            key: 'phone',\n          },\n          {\n            title: '操作',\n            key: 'action',\n            align: 'center',\n            render: (h, params) => {\n              return h('div', [\n                h('Button', {\n                  props: {\n                    type: 'info',\n                    size: 'small'\n                  },\n                  style: {\n                    marginRight: '5px',\n                    marginBottom: '5px'\n                  },\n                  on: {\n                    click: () => {\n                      this.xiugai(params.row);\n                    }\n                  }\n                }, '修改'),\n                h('Button', {\n                  props: {\n                    type: 'info',\n                    size: 'small'\n                  },\n                  style: {\n                    marginRight: '5px',\n                    marginBottom: '5px'\n                  },\n                  on: {\n                    click: () => {\n                      this.delete(params.row);\n                    }\n                  }\n                }, '删除'),\n              ]);\n            }\n          }\n        ],\n        data1: []\n      }\n    },\n    created() {\n      // console.log(localStorage.getItem('jwt'))\n      this.tableShow()\n    },\n    methods: {\n      //复选框\n      handleSelectAll (status) {\n        this.$refs.selection.selectAll(status);\n        alert(this.$refs.selection)\n      },\n      //用户信息展示\n      tableShow(){\n        this.$axios({\n          method: 'post',\n          url: 'admin/order/show',\n          data: this.$qs.stringify({\n            uid:this.searchName,\n            phone:this.searchPhone,\n            state:this.searchNum,\n            type:this.searchNum,\n            time:this.searchNum,\n            jwt: localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          console.log(res.data.table,'用户信息')\n          this.ajaxHistoryData = res.data.table;\n          this.dataCount = res.data.table.length;\n          // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n          if (res.data.table.length < this.pageSize) {\n            // this.historyData = this.ajaxHistoryData;\n            this.data1 = res.data.table\n          } else {\n            this.data1 = this.ajaxHistoryData.slice(0, this.pageSize);\n          }\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      //搜索\n      handSeek(){\n        this.tableShow()\n      },\n      //新增\n      add(){\n        this.modal3=true\n        //省联动\n        this.$axios({\n          url: 'admin/user/adress',\n          method: 'get',\n        }).then(res => {\n          // console.log(res,'12345')\n          this.cityList = res.data.table\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...')\n        });\n        //品牌联动\n        this.$axios({\n          url: 'admin/order/brand',\n          method: 'get',\n        }).then(res => {\n          console.log(res,'12345')\n          this.pinpai = res.data.table\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...')\n        });\n      },\n      //省联动\n      chioce(item){\n        this.cityListId=item.id\n        this.$axios({\n          method: 'post',\n          url: 'admin/user/getRegion',\n          data: this.$qs.stringify({\n            id: item.id,\n            type: item.type\n            // jwt:localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res,'市三级联动')\n          this.cityList1=res.data\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      //市联动\n      chioce1(item){\n        // console.log(JSON.stringify(item),'12345')\n        this.cityListId1=item.id\n        this.$axios({\n          method: 'post',\n          url: 'admin/user/getRegion',\n          data: this.$qs.stringify({\n            id: item.id,\n            type: item.type\n            // jwt:localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res,'市三级联动')\n          this.cityList2=res.data\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      //区联动\n      chioce2(item){\n        this.cityListId2=item.id\n      },\n      //品牌\n      chioce3(item){\n        // console.log(item,'品牌1')\n        this.Npinpai=item.laptop_name\n        this.$axios({\n          method: 'post',\n          url: 'admin/order/version',\n          data: this.$qs.stringify({\n            // id: item.id,\n            laptop_name: item.laptop_name\n            // jwt:localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res,'品牌2')\n          this.jixing=res.data.table\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      //机型\n      chioce4(item){\n        // console.log(item,'机型1')\n        this.Njixing=item.series_name\n        this.$axios({\n          method: 'post',\n          url: 'admin/order/equipment',\n          data: this.$qs.stringify({\n            // id: item.id,\n            series_name: item.series_name\n            // jwt:localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res,'机型2')\n          this.shebei=res.data.table\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      //设备\n      chioce5(item){\n        this.Nshebei=item.juti_name\n      },\n      chioce6(item){\n        // console.log(item,'订单类型')\n        this.formAdd.state = item.value\n      },\n      chioce7(item){\n        // console.log(item,'订单状态')\n        this.formAdd.type = item.value\n      },\n\n      changetime(res){\n        console.log(res,'分钟时间内')\n        this.adddate=res\n      },\n      ok3 (formAdd) {\n        // console.log(this.$nextTick,'验证')\n        this.$refs[formAdd].validate((valid) => {\n          if (valid) {\n            this.$axios({\n              method: 'post',\n              url: 'admin/user/insert',\n              data: this.$qs.stringify({\n                name: this.formAdd.name,\n                phone: this.formAdd.phone,\n                grade: this.formAdd.grade,\n                arrangement: this.formAdd.arrangement,\n                total: this.formAdd.total,\n                quota: this.formAdd.quota,\n                provinceid: this.cityListId,\n                cityid: this.cityListId1,\n                areaid:this.cityListId2,\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              // console.log(res,'用户增加')\n              this.tableShow()\n              this.modal3 = false\n              this.formAdd = {}\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n            callback();\n          } else{\n            this.loading = false;\n            this.$nextTick(() => {\n              this.loading = true;\n            });\n            this.$Message.error('新增失败，请填写完整的信息!');\n          }\n        })\n        this.tableShow()\n        this.formAdd = {}\n      },\n      cancel3 () {\n        // this.$Message.info('Clicked cancel');\n      },\n      //用户修改\n      xiugai(row){\n        // console.log(row)\n        this.modal1=true\n        this.formItem=row\n        this.formItem.Id=row.Id\n        this.formItem.cityid=row.cityid\n        this.add()\n        this.chioce()\n        this.chioce1()\n        this.chioce2()\n      },\n      ok (formItem) {\n        // console.log(this.$refs[formItem])\n        this.modal3=false\n        this.$refs[formItem].validate((valid) => {\n          if (valid) {\n            this.$axios({\n              method: 'post',\n              url: 'admin/user/upd',\n              data: this.$qs.stringify({\n                Id:this.formItem.Id,\n                name:this.formItem.name,\n                phone: this.formItem.phone,\n                grade: this.formItem.grade,\n                arrangement: this.formItem.arrangement,\n                total: this.formItem.total,\n                quota: this.formItem.quota,\n                pass: this.formItem.pass,\n                provinceid: this.cityListId,\n                cityid: this.cityListId1,\n                areaid:this.cityListId2,\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              // console.log(res,'用户修改')\n              this.modal3=false\n              this.modal1=false\n              this.tableShow()\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n            callback();\n          } else{\n            this.loading = false;\n            this.$nextTick(() => {\n              this.loading = true;\n            });\n            this.$Message.error('修改失败,请正确填写信息!');\n          }\n        })\n        this.tableShow()\n      },\n      cancel () {\n        this.modal3=false\n        // this.$Message.info('Clicked cancel');\n      },\n      // 修改上传图片\n      xiugaiimg(row){\n        // console.log(row)\n        this.modal2=true\n        // this.formImg=row\n        this.formImg.Id=row.Id\n      },\n      handleBeforUpload (file) {\n        // this.formImg.img = file;\n        this.file = file  // 将回调的文件信息存入data.file\n        return false\n      },\n      handleSuccess (response, file, fileList) {\n        if(response.code === 200){\n          this.modal2=false\n          this.tableShow()\n        }\n      },\n      //删除\n      delete(row){\n        // console.log(row)\n        this.$Modal.confirm({\n          title: '删除',\n          content: '确认删除该条信息吗？',\n          onOk: () => {\n            this.$axios({\n              method: 'post',\n              url: 'admin/order/delete',\n              data: this.$qs.stringify({\n                Id: row.Id,\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              this.tableShow()\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n          },\n          onCancel: () => {\n            this.$Message.info('取消');\n          }\n        });\n      },\n      //分页\n      changepage (index) {\n        var _start = (index - 1) * this.pageSize;\n        var _end = index * this.pageSize;\n        this.data1 = this.ajaxHistoryData.slice(_start, _end);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}