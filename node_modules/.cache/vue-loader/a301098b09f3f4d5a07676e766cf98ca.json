{"remainingRequest":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/szt/Desktop/iview-admin/src/view/money/money_page.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/szt/Desktop/iview-admin/src/view/money/money_page.vue","mtime":1566895966000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data () {\n    return {\n      searchValue:'',\n      modal1: false,\n      modal2: false,\n      modal3:false,\n      //    分页\n      ajaxHistoryData: [],\n      // 初始化信息总条数\n      dataCount: 0,\n      // 每页显示多少条\n      pageSize: 10,\n      page:1,\n      columns1: [\n        {\n          title: '达人名称',\n          key: 'username'\n        },\n        {\n          title: '手机号',\n          key: 'phone'\n        },\n        {\n          title: '优惠券名称',\n          key: 'name',\n          // width: 150\n        },\n        {\n          title: '优惠券码',\n          key: 'code',\n          // width: 120\n        },\n        {\n          title: '金额',\n          key: 'price'\n        },\n        {\n          title: '创建时间',\n          key: 'time'\n        },\n        {\n          title: '开始时间',\n          key: 'startime'\n        },\n        {\n          title: '截止日期',\n          key: 'outtime'\n        },\n        {\n          title: '使用状态',\n          key: 'state',\n          render: (h, params) => {\n            return h('Tag', {\n              props: {\n                color: params.row.state === 1 ? 'green' : params.row.state === 2 ? 'orange' : ''\n              }\n            }, params.row.state === 1 ? '未使用' : params.row.state === 2 ? '使用' : '');\n          }\n        },\n        {\n          title: '操作',\n          key: 'action',\n          align: 'center',\n          render: (h, params) => {\n            return h('div', [\n              h('Button', {\n                props: {\n                  type: 'info',\n                  size: 'small'\n                },\n                style: {\n                  marginRight: '5px',\n                  marginBottom: '3px'\n                },\n                attrs: {\n                  style: 'background-color:#d6514d;border:1px solid #d6514d'\n                },\n                on: {\n                  click: () => {\n                    this.delete(params.row);\n                  }\n                }\n              }, '删除')\n            ]);\n          }\n        }\n      ],\n      data1: []\n    }\n  },\n  created() {\n    // console.log(localStorage.getItem('jwt'))\n    this.tableShow()\n  },\n  methods: {\n    //用户信息展示\n    tableShow(){\n      this.$axios({\n        method: 'post',\n        url: 'admin/Coupon/conponlist',\n        data: this.$qs.stringify({\n          page:this.page,\n          jwt: localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res.data.table,'用户信息')\n        this.ajaxHistoryData = res.data.table;\n        // this.dataCount = res.data.table.length;\n        this.dataCount = res.data.count;\n        // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n        if (res.data.count < this.pageSize) {\n          // this.historyData = this.ajaxHistoryData;\n          this.data1 = res.data.table\n        } else {\n          this.data1 = this.ajaxHistoryData.slice(0, this.pageSize);\n        }\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    //搜索\n    handSeek(){\n      // this.tableShow()\n      this.$axios({\n        method: 'post',\n        url: 'admin/user/show',\n        data: this.$qs.stringify({\n          name:this.searchValue,\n          jwt: localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res,'搜索用户')\n        this.data2 = res.data.table\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    //删除\n    delete(row){\n      // console.log(row)\n      this.$Modal.confirm({\n        title: '删除',\n        content: '确认删除该条信息吗？',\n        onOk: () => {\n          this.$axios({\n            method: 'post',\n            url: 'admin/Coupon/conpondelete',\n            data: this.$qs.stringify({\n              Id: row.Id,\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            this.tableShow()\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n        },\n        onCancel: () => {\n          this.$Message.info('取消');\n        }\n      });\n    },\n    //分页\n    changepage (index) {\n      this.page = index\n      this.tableShow()\n      var _start = (index - 1) * this.pageSize;\n      var _end = index * this.pageSize;\n      this.data1 = this.ajaxHistoryData.slice(_start, _end);\n    }\n  }\n}\n",{"version":3,"sources":["money_page.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"money_page.vue","sourceRoot":"src/view/money","sourcesContent":["<template>\n  <div>\n    <Input clearable placeholder=\"请输入优惠券码关键字搜索\" class=\"search-input\" v-model=\"searchValue\" style=\"width: 400px;margin-right: 3px\"/>\n    <Button type=\"info\" @click=\"handSeek\">搜索</Button>\n    <Table :columns=\"columns1\" :data=\"data1\" style=\"margin-top: 10px\"></Table>\n    <!--//分页-->\n    <div style=\"text-align: right\">\n      <Page :total=\"dataCount\" :page-size=\"pageSize\" show-total class=\"paging\" @on-change=\"changepage\"></Page>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        searchValue:'',\n        modal1: false,\n        modal2: false,\n        modal3:false,\n        //    分页\n        ajaxHistoryData: [],\n        // 初始化信息总条数\n        dataCount: 0,\n        // 每页显示多少条\n        pageSize: 10,\n        page:1,\n        columns1: [\n          {\n            title: '达人名称',\n            key: 'username'\n          },\n          {\n            title: '手机号',\n            key: 'phone'\n          },\n          {\n            title: '优惠券名称',\n            key: 'name',\n            // width: 150\n          },\n          {\n            title: '优惠券码',\n            key: 'code',\n            // width: 120\n          },\n          {\n            title: '金额',\n            key: 'price'\n          },\n          {\n            title: '创建时间',\n            key: 'time'\n          },\n          {\n            title: '开始时间',\n            key: 'startime'\n          },\n          {\n            title: '截止日期',\n            key: 'outtime'\n          },\n          {\n            title: '使用状态',\n            key: 'state',\n            render: (h, params) => {\n              return h('Tag', {\n                props: {\n                  color: params.row.state === 1 ? 'green' : params.row.state === 2 ? 'orange' : ''\n                }\n              }, params.row.state === 1 ? '未使用' : params.row.state === 2 ? '使用' : '');\n            }\n          },\n          {\n            title: '操作',\n            key: 'action',\n            align: 'center',\n            render: (h, params) => {\n              return h('div', [\n                h('Button', {\n                  props: {\n                    type: 'info',\n                    size: 'small'\n                  },\n                  style: {\n                    marginRight: '5px',\n                    marginBottom: '3px'\n                  },\n                  attrs: {\n                    style: 'background-color:#d6514d;border:1px solid #d6514d'\n                  },\n                  on: {\n                    click: () => {\n                      this.delete(params.row);\n                    }\n                  }\n                }, '删除')\n              ]);\n            }\n          }\n        ],\n        data1: []\n      }\n    },\n    created() {\n      // console.log(localStorage.getItem('jwt'))\n      this.tableShow()\n    },\n    methods: {\n      //用户信息展示\n      tableShow(){\n        this.$axios({\n          method: 'post',\n          url: 'admin/Coupon/conponlist',\n          data: this.$qs.stringify({\n            page:this.page,\n            jwt: localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res.data.table,'用户信息')\n          this.ajaxHistoryData = res.data.table;\n          // this.dataCount = res.data.table.length;\n          this.dataCount = res.data.count;\n          // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n          if (res.data.count < this.pageSize) {\n            // this.historyData = this.ajaxHistoryData;\n            this.data1 = res.data.table\n          } else {\n            this.data1 = this.ajaxHistoryData.slice(0, this.pageSize);\n          }\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      //搜索\n      handSeek(){\n        // this.tableShow()\n        this.$axios({\n          method: 'post',\n          url: 'admin/user/show',\n          data: this.$qs.stringify({\n            name:this.searchValue,\n            jwt: localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res,'搜索用户')\n          this.data2 = res.data.table\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      //删除\n      delete(row){\n        // console.log(row)\n        this.$Modal.confirm({\n          title: '删除',\n          content: '确认删除该条信息吗？',\n          onOk: () => {\n            this.$axios({\n              method: 'post',\n              url: 'admin/Coupon/conpondelete',\n              data: this.$qs.stringify({\n                Id: row.Id,\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              this.tableShow()\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n          },\n          onCancel: () => {\n            this.$Message.info('取消');\n          }\n        });\n      },\n      //分页\n      changepage (index) {\n        this.page = index\n        this.tableShow()\n        var _start = (index - 1) * this.pageSize;\n        var _end = index * this.pageSize;\n        this.data1 = this.ajaxHistoryData.slice(_start, _end);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}