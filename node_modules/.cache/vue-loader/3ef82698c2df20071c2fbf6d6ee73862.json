{"remainingRequest":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/szt/Desktop/iview-admin/src/view/pay/pay_page.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/szt/Desktop/iview-admin/src/view/pay/pay_page.vue","mtime":1562813331000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data () {\n    return {\n      url:'',\n      img:{\n        image:null,\n        jwt:localStorage.getItem('jwt')\n      },\n      ruleValidate: {\n        name: [\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        pay_type: [\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n      },\n      ruleValidate2: {\n        type: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        price:[\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        number: [\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ],\n        startime: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        outtime: [\n          { required: true, message: '不能为空', trigger: 'blur' },\n        ],\n        name: [\n          { required: true, message: '不能为空', trigger: 'blur' }\n        ]\n      },\n      searchValue:'',\n      name:'',\n      columns4: [\n        {\n          type: 'selection',\n          width: 60,\n          height: 20,\n          align: 'center'\n        },\n        {\n          title: '用户名',\n          key: 'name'\n        },\n        {\n          title: '手机号',\n          key: 'phone'\n        }\n      ],\n      type:[\n        {\n          value: '2',\n          label: '不汇款'\n        },\n        {\n          value: '1',\n          label: '汇款'\n        },\n      ],\n      date21:'',\n      adddate:'',\n      adddate1:'',\n      formfabu:{},\n      formAdd:{\n        pay_type:'',\n        img:'',\n        name:'',\n        jwt:localStorage.getItem('jwt')\n      },\n      formItem:{\n        Id:'',\n        pay_type:'',\n        img:'',\n        name:'',\n        jwt:localStorage.getItem('jwt')\n      },\n      formImg:{\n        Id:\"\",\n        img:null,\n        jwt:localStorage.getItem('jwt')\n      },\n      modal1: false,\n      modal2: false,\n      modal3:false,\n      modal4:false,\n      loading: true,\n      loading1: true,\n      modal3type:true,\n      //    分页\n      ajaxHistoryData: [],\n      // 初始化信息总条数\n      dataCount: 0,\n      // 每页显示多少条\n      pageSize: 5,\n      ajaxHistoryData1: [],\n      dataCount1: 0,\n      // 每页显示多少条\n      pageSize1: 8,\n      columns1: [\n        {\n          title: '名称',\n          key: 'name'\n        },\n        {\n          title: '图片',\n          key: 'img',\n          render: (h, params) => {\n            // console.log(params.row)\n            return h('img', {\n              style: {\n                width: '100px'\n              },\n              attrs: {\n                src: params.row.img, style: 'width: 100px;height: 100px'\n              }\n              // on: {\n              //     click: () => {\n              //         this.hangImg(1, params.row);\n              //     }\n              // }\n            });\n          }\n        },\n        {\n          title: '时间',\n          key: 'time'\n        },\n        {\n          title: '是否汇款',\n          key: 'pay_type',\n          render: (h, params) => {\n            return h('Tag', {\n              props: {\n                color: params.row.pay_type === 1 ? 'green' : params.row.pay_type === 2 ? 'orange' :''\n              }\n            }, params.row.pay_type === 1 ? '汇款' : params.row.pay_type === 2 ? '不汇款' : '');\n          }\n        },\n        {\n          title: '操作',\n          key: 'action',\n          align: 'center',\n          render: (h, params) => {\n            return h('div', [\n              h('Button', {\n                props: {\n                  type: 'info',\n                  size: 'small'\n                },\n                style: {\n                  marginRight: '5px',\n                  marginBottom: '3px'\n                },\n                on: {\n                  click: () => {\n                    this.xiugai(params.row);\n                  }\n                }\n              }, '修改'),\n              h('Button', {\n                props: {\n                  type: 'info',\n                  size: 'small'\n                },\n                style: {\n                  marginRight: '5px',\n                  marginBottom: '3px'\n                },\n                on: {\n                  click: () => {\n                    this.delete(params.row);\n                  }\n                }\n              }, '删除')\n            ]);\n          }\n        }\n      ],\n      data1: [],\n      data3: [],\n      moneyId:''\n    }\n  },\n  created() {\n    this.tableShow()\n  },\n  methods: {\n    //用户信息展示\n    tableShow(){\n      this.$axios({\n        method: 'post',\n        url: 'admin/Pay/show',\n        data: this.$qs.stringify({\n          pay_type: this.searchValue,\n          name:this.name,\n          jwt: localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res.data.table,'用户信息')\n        this.ajaxHistoryData = res.data.table;\n        this.dataCount = res.data.table.length;\n        // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n        if (res.data.table.length < this.pageSize) {\n          // this.historyData = this.ajaxHistoryData;\n          this.data1 = res.data.table\n        } else {\n          this.data1 = this.ajaxHistoryData.slice(0, this.pageSize);\n        }\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    //新增\n    add(){\n      this.modal3=true\n    },\n    handleBeforUpload1 (file) {\n      this.img.image = file  // 将回调的文件信息存入data.file\n    },\n    handleSuccess1(response){\n      console.log(response.url)\n      this.url = response.url\n    },\n    chioce(item){\n      // console.log(item,'悬着用户')\n      this.formAdd.pay_type = item.value\n    },\n    ok3 (formAdd) {\n      this.$refs[formAdd].validate((valid) => {\n        if (valid) {\n          this.$axios({\n            method: 'post',\n            url: 'admin/Pay/insert',\n            data: this.$qs.stringify({\n              img:this.url,\n              name:this.formAdd.name,\n              pay_type:this.formAdd.pay_type,\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res,'用户增加')\n            this.tableShow()\n            this.modal3=false\n            this.formAdd = {}\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n          callback();\n        } else{\n          this.loading = false;\n          this.$nextTick(() => {\n            this.loading = true;\n          });\n          this.$Message.error('新增失败,请正确填写信息!');\n        }\n      })\n    },\n    cancel3 () {\n      // this.$Message.info('Clicked cancel');\n    },\n    //搜索\n    handSeek(){\n      this.tableShow()\n    },\n    //发布\n    fabu(row){\n      // console.log(row,'发布')\n      this.moneyId = row.Id\n      if(row.type === 1){\n        this.modal4=false,\n          this.$axios({\n            method: 'post',\n            url: 'admin/Coupon/release',\n            data: this.$qs.stringify({\n              Id: row.Id,\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res,'发布')\n            this.$Message.success(res.data.msg);\n            this.tableShow()\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n      }else if(row.type === 2){\n        this.modal4=true,\n          this.$axios({\n            method: 'post',\n            url: 'admin/user/show',\n            data: this.$qs.stringify({\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            this.ajaxHistoryData1 = res.data.table;\n            this.dataCount1 = res.data.table.length;\n            // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n            if (res.data.table.length < this.pageSize1) {\n              // this.historyData = this.ajaxHistoryData;\n              this.data2=res.data.table\n            } else {\n              this.data2 = this.ajaxHistoryData1.slice(0, this.pageSize1);\n            }\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n      }\n    },\n    select(selection,row){\n      // this.formfabu.push(row.name)\n      // console.log(row,'宣布在')\n      this.data3.push(row.Id)\n      // console.log(this.data3,'宣布在所欲11111111111')\n    },\n    selectall(selection){\n      // console.log(selection,'宣布在所欲')\n      for(var i=0; i<selection.length; i ++){\n        this.data3[i] = selection[i].Id\n      }\n      // console.log(this.data3,'宣布在所欲11111111111')\n    },\n    handleSelectAll (status) {\n      this.$refs.selection.selectAll(status);\n    },\n    ok4 () {\n      this.$axios({\n        method: 'post',\n        url: 'admin/Coupon/release',\n        data: this.$qs.stringify({\n          UId:this.data3,\n          Id:this.moneyId,\n          jwt:localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res,'用户fabuchenggong')\n        this.tableShow()\n      }).catch(res => {\n        this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    cancel4 () {\n      // this.$Message.info('Clicked cancel');\n    },\n    //用户修改\n    xiugai(row){\n      console.log(row)\n      this.modal1=true\n      this.formItem=row\n      this.url=row.img\n    },\n    chioce1(item){\n      console.log(item,'悬着用户')\n      this.formItem.type = item.value\n    },\n    ok (formItem) {\n      this.$refs[formItem].validate((valid) => {\n        if (valid) {\n          this.$axios({\n            method: 'post',\n            url: 'admin/Pay/upd',\n            data: this.$qs.stringify({\n              Id: this.formItem.Id,\n              img:this.url,\n              name:this.formItem.name,\n              pay_type:this.formItem.pay_type,\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            console.log(res,'修改')\n            this.modal1=false\n            this.tableShow()\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n          callback();\n        } else{\n          this.loading1 = false;\n          this.$nextTick(() => {\n            this.loading1 = true;\n          });\n          this.$Message.error('修改失败,请正确填写信息!');\n        }\n      })\n    },\n    cancel () {\n      this.modal3=false\n      // this.$Message.info('Clicked cancel');\n    },\n    //删除\n    delete(row){\n      // console.log(row)\n      this.$Modal.confirm({\n        title: '删除',\n        content: '确认删除该条信息吗？',\n        onOk: () => {\n          this.$axios({\n            method: 'post',\n            url: 'admin/Pay/delete',\n            data: this.$qs.stringify({\n              Id: row.Id,\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            this.tableShow()\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n        },\n        onCancel: () => {\n          this.$Message.info('取消');\n        }\n      });\n\n    },\n    //分页\n    changepage (index) {\n      var _start = (index - 1) * this.pageSize;\n      var _end = index * this.pageSize;\n      this.data1 = this.ajaxHistoryData.slice(_start, _end);\n    },\n    changepage1 (index) {\n      var _start = (index - 1) * this.pageSize1;\n      var _end = index * this.pageSize1;\n      this.data2 = this.ajaxHistoryData1.slice(_start, _end);\n    }\n  }\n}\n",{"version":3,"sources":["pay_page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pay_page.vue","sourceRoot":"src/view/pay","sourcesContent":["<template>\n  <div>\n    <Button style=\"margin-left: 10px\" type=\"info\" @click=\"add\">新增</Button>\n    <Input clearable placeholder=\"请输入汇款关键字搜索\" class=\"search-input\" v-model=\"searchValue\" style=\"width: 300px\"/>\n    <Input clearable placeholder=\"请输入用户名关键字搜索\" class=\"search-input\" v-model=\"name\" style=\"width: 300px\"/>\n    <Button type=\"info\" @click=\"handSeek\">搜索</Button>\n    <Table :columns=\"columns1\" :data=\"data1\"></Table>\n    <!--新增-->\n    <Modal\n      v-model=\"modal3\"\n      title=\"新增\"\n      @on-ok=\"ok3('formAdd')\"\n      @on-cancel=\"cancel3\"\n      :loading=\"loading\">\n      <Form :model=\"formAdd\" :label-width=\"80\" :rules=\"ruleValidate\" ref=\"formAdd\">\n        <FormItem label=\"名称\" prop=\"name\">\n          <Input v-model=\"formAdd.name\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"用户类型\" prop=\"pay_type\">\n          <Select v-model=\"formAdd.pay_type\" style=\"width:200px\">\n            <Option v-for=\"item in type\" :value=\"item.value\" :key=\"item.value\" @click.native=\"chioce(item)\">{{ item.label }}</Option>\n          </Select>\n          <!--<Input v-model=\"formAdd.type\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"图片\">\n          <Upload\n            action=\"http://192.168.8.100/repair/public/admin/index/upd\"\n            :data=\"img\"\n            ref=\"upload\"\n            :format=\"['jpg','jpeg','png']\"\n            :show-upload-list=\"false\"\n            :before-upload=\"handleBeforUpload1\"\n            :on-success=\"handleSuccess1\">\n            <Button icon=\"ios-cloud-upload-outline\">点击上传</Button>\n          </Upload>\n        </FormItem>\n        <FormItem>\n          <div style=\"width: 100px;height: 100px;border: 1px darkgrey solid;text-align: center\">\n            <img :src=\"url\" alt=\"请点击上传\" style=\"width: 100px;height: 100px\" v-model=\"formAdd.img\">\n          </div>\n        </FormItem>\n      </Form>\n    </Modal>\n    <!--//修改弹框-->\n    <Modal\n      v-model=\"modal1\"\n      title=\"修改\"\n      @on-ok=\"ok('formItem')\"\n      @on-cancel=\"cancel\"\n      :loading=\"loading1\">\n      <Form :model=\"formItem\" :label-width=\"85\" :rules=\"ruleValidate2\" ref=\"formItem\">\n        <FormItem label=\"名称\" prop=\"name\">\n          <Input v-model=\"formItem.name\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"用户类型\" prop=\"pay_type\">\n          <Select v-model=\"formItem.pay_type\" style=\"width:200px\">\n            <Option v-for=\"item in type\" :value=\"item.value\" :key=\"item.value\" @click.native=\"chioce1(item)\">{{ item.label }}</Option>\n          </Select>\n          <!--<Input v-model=\"formAdd.type\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"图片\">\n          <Upload\n            action=\"http://192.168.8.100/repair/public/admin/index/upd\"\n            :data=\"img\"\n            ref=\"upload\"\n            :format=\"['jpg','jpeg','png']\"\n            :show-upload-list=\"false\"\n            :before-upload=\"handleBeforUpload1\"\n            :on-success=\"handleSuccess1\">\n            <Button icon=\"ios-cloud-upload-outline\">点击上传</Button>\n          </Upload>\n        </FormItem>\n        <FormItem>\n          <div style=\"width: 100px;height: 100px;border: 1px darkgrey solid;text-align: center\">\n            <img :src=\"url\" alt=\"请点击上传\" style=\"width: 100px;height: 100px\" v-model=\"formItem.img\">\n          </div>\n        </FormItem>\n      </Form>\n    </Modal>\n    <!--//分页-->\n    <div style=\"text-align: right\">\n      <Page :total=\"dataCount\" :page-size=\"pageSize\" show-total class=\"paging\" @on-change=\"changepage\"></Page>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        url:'',\n        img:{\n          image:null,\n          jwt:localStorage.getItem('jwt')\n        },\n        ruleValidate: {\n          name: [\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          pay_type: [\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n        },\n        ruleValidate2: {\n          type: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          price:[\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          number: [\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          startime: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          outtime: [\n            { required: true, message: '不能为空', trigger: 'blur' },\n          ],\n          name: [\n            { required: true, message: '不能为空', trigger: 'blur' }\n          ]\n        },\n        searchValue:'',\n        name:'',\n        columns4: [\n          {\n            type: 'selection',\n            width: 60,\n            height: 20,\n            align: 'center'\n          },\n          {\n            title: '用户名',\n            key: 'name'\n          },\n          {\n            title: '手机号',\n            key: 'phone'\n          }\n        ],\n        type:[\n          {\n            value: '2',\n            label: '不汇款'\n          },\n          {\n            value: '1',\n            label: '汇款'\n          },\n        ],\n        date21:'',\n        adddate:'',\n        adddate1:'',\n        formfabu:{},\n        formAdd:{\n          pay_type:'',\n          img:'',\n          name:'',\n          jwt:localStorage.getItem('jwt')\n        },\n        formItem:{\n          Id:'',\n          pay_type:'',\n          img:'',\n          name:'',\n          jwt:localStorage.getItem('jwt')\n        },\n        formImg:{\n          Id:\"\",\n          img:null,\n          jwt:localStorage.getItem('jwt')\n        },\n        modal1: false,\n        modal2: false,\n        modal3:false,\n        modal4:false,\n        loading: true,\n        loading1: true,\n        modal3type:true,\n        //    分页\n        ajaxHistoryData: [],\n        // 初始化信息总条数\n        dataCount: 0,\n        // 每页显示多少条\n        pageSize: 5,\n        ajaxHistoryData1: [],\n        dataCount1: 0,\n        // 每页显示多少条\n        pageSize1: 8,\n        columns1: [\n          {\n            title: '名称',\n            key: 'name'\n          },\n          {\n            title: '图片',\n            key: 'img',\n            render: (h, params) => {\n              // console.log(params.row)\n              return h('img', {\n                style: {\n                  width: '100px'\n                },\n                attrs: {\n                  src: params.row.img, style: 'width: 100px;height: 100px'\n                }\n                // on: {\n                //     click: () => {\n                //         this.hangImg(1, params.row);\n                //     }\n                // }\n              });\n            }\n          },\n          {\n            title: '时间',\n            key: 'time'\n          },\n          {\n            title: '是否汇款',\n            key: 'pay_type',\n            render: (h, params) => {\n              return h('Tag', {\n                props: {\n                  color: params.row.pay_type === 1 ? 'green' : params.row.pay_type === 2 ? 'orange' :''\n                }\n              }, params.row.pay_type === 1 ? '汇款' : params.row.pay_type === 2 ? '不汇款' : '');\n            }\n          },\n          {\n            title: '操作',\n            key: 'action',\n            align: 'center',\n            render: (h, params) => {\n              return h('div', [\n                h('Button', {\n                  props: {\n                    type: 'info',\n                    size: 'small'\n                  },\n                  style: {\n                    marginRight: '5px',\n                    marginBottom: '3px'\n                  },\n                  on: {\n                    click: () => {\n                      this.xiugai(params.row);\n                    }\n                  }\n                }, '修改'),\n                h('Button', {\n                  props: {\n                    type: 'info',\n                    size: 'small'\n                  },\n                  style: {\n                    marginRight: '5px',\n                    marginBottom: '3px'\n                  },\n                  on: {\n                    click: () => {\n                      this.delete(params.row);\n                    }\n                  }\n                }, '删除')\n              ]);\n            }\n          }\n        ],\n        data1: [],\n        data3: [],\n        moneyId:''\n      }\n    },\n    created() {\n      this.tableShow()\n    },\n    methods: {\n      //用户信息展示\n      tableShow(){\n        this.$axios({\n          method: 'post',\n          url: 'admin/Pay/show',\n          data: this.$qs.stringify({\n            pay_type: this.searchValue,\n            name:this.name,\n            jwt: localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res.data.table,'用户信息')\n          this.ajaxHistoryData = res.data.table;\n          this.dataCount = res.data.table.length;\n          // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n          if (res.data.table.length < this.pageSize) {\n            // this.historyData = this.ajaxHistoryData;\n            this.data1 = res.data.table\n          } else {\n            this.data1 = this.ajaxHistoryData.slice(0, this.pageSize);\n          }\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      //新增\n      add(){\n        this.modal3=true\n      },\n      handleBeforUpload1 (file) {\n        this.img.image = file  // 将回调的文件信息存入data.file\n      },\n      handleSuccess1(response){\n        console.log(response.url)\n        this.url = response.url\n      },\n      chioce(item){\n        // console.log(item,'悬着用户')\n        this.formAdd.pay_type = item.value\n      },\n      ok3 (formAdd) {\n        this.$refs[formAdd].validate((valid) => {\n          if (valid) {\n            this.$axios({\n              method: 'post',\n              url: 'admin/Pay/insert',\n              data: this.$qs.stringify({\n                img:this.url,\n                name:this.formAdd.name,\n                pay_type:this.formAdd.pay_type,\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              // console.log(res,'用户增加')\n              this.tableShow()\n              this.modal3=false\n              this.formAdd = {}\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n            callback();\n          } else{\n            this.loading = false;\n            this.$nextTick(() => {\n              this.loading = true;\n            });\n            this.$Message.error('新增失败,请正确填写信息!');\n          }\n        })\n      },\n      cancel3 () {\n        // this.$Message.info('Clicked cancel');\n      },\n      //搜索\n      handSeek(){\n        this.tableShow()\n      },\n      //发布\n      fabu(row){\n        // console.log(row,'发布')\n        this.moneyId = row.Id\n        if(row.type === 1){\n          this.modal4=false,\n            this.$axios({\n              method: 'post',\n              url: 'admin/Coupon/release',\n              data: this.$qs.stringify({\n                Id: row.Id,\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              // console.log(res,'发布')\n              this.$Message.success(res.data.msg);\n              this.tableShow()\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n        }else if(row.type === 2){\n          this.modal4=true,\n            this.$axios({\n              method: 'post',\n              url: 'admin/user/show',\n              data: this.$qs.stringify({\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              this.ajaxHistoryData1 = res.data.table;\n              this.dataCount1 = res.data.table.length;\n              // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n              if (res.data.table.length < this.pageSize1) {\n                // this.historyData = this.ajaxHistoryData;\n                this.data2=res.data.table\n              } else {\n                this.data2 = this.ajaxHistoryData1.slice(0, this.pageSize1);\n              }\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n        }\n      },\n      select(selection,row){\n        // this.formfabu.push(row.name)\n        // console.log(row,'宣布在')\n        this.data3.push(row.Id)\n        // console.log(this.data3,'宣布在所欲11111111111')\n      },\n      selectall(selection){\n        // console.log(selection,'宣布在所欲')\n        for(var i=0; i<selection.length; i ++){\n          this.data3[i] = selection[i].Id\n        }\n        // console.log(this.data3,'宣布在所欲11111111111')\n      },\n      handleSelectAll (status) {\n        this.$refs.selection.selectAll(status);\n      },\n      ok4 () {\n        this.$axios({\n          method: 'post',\n          url: 'admin/Coupon/release',\n          data: this.$qs.stringify({\n            UId:this.data3,\n            Id:this.moneyId,\n            jwt:localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res,'用户fabuchenggong')\n          this.tableShow()\n        }).catch(res => {\n          this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      cancel4 () {\n        // this.$Message.info('Clicked cancel');\n      },\n      //用户修改\n      xiugai(row){\n        console.log(row)\n        this.modal1=true\n        this.formItem=row\n        this.url=row.img\n      },\n      chioce1(item){\n        console.log(item,'悬着用户')\n        this.formItem.type = item.value\n      },\n      ok (formItem) {\n        this.$refs[formItem].validate((valid) => {\n          if (valid) {\n            this.$axios({\n              method: 'post',\n              url: 'admin/Pay/upd',\n              data: this.$qs.stringify({\n                Id: this.formItem.Id,\n                img:this.url,\n                name:this.formItem.name,\n                pay_type:this.formItem.pay_type,\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              console.log(res,'修改')\n              this.modal1=false\n              this.tableShow()\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n            callback();\n          } else{\n            this.loading1 = false;\n            this.$nextTick(() => {\n              this.loading1 = true;\n            });\n            this.$Message.error('修改失败,请正确填写信息!');\n          }\n        })\n      },\n      cancel () {\n        this.modal3=false\n        // this.$Message.info('Clicked cancel');\n      },\n      //删除\n      delete(row){\n        // console.log(row)\n        this.$Modal.confirm({\n          title: '删除',\n          content: '确认删除该条信息吗？',\n          onOk: () => {\n            this.$axios({\n              method: 'post',\n              url: 'admin/Pay/delete',\n              data: this.$qs.stringify({\n                Id: row.Id,\n                jwt:localStorage.getItem('jwt')\n              })\n            }).then(res => {\n              this.tableShow()\n            }).catch(res => {\n              this.$Message.error('请求超时,请稍后再试...');\n            });\n          },\n          onCancel: () => {\n            this.$Message.info('取消');\n          }\n        });\n\n      },\n      //分页\n      changepage (index) {\n        var _start = (index - 1) * this.pageSize;\n        var _end = index * this.pageSize;\n        this.data1 = this.ajaxHistoryData.slice(_start, _end);\n      },\n      changepage1 (index) {\n        var _start = (index - 1) * this.pageSize1;\n        var _end = index * this.pageSize1;\n        this.data2 = this.ajaxHistoryData1.slice(_start, _end);\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}