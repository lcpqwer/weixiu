{"remainingRequest":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/szt/Desktop/iview-admin/src/view/pManagement/p_management.vue?vue&type=style&index=0&id=e8f9473a&scoped=true&lang=css&","dependencies":[{"path":"/Users/szt/Desktop/iview-admin/src/view/pManagement/p_management.vue","mtime":1565337167000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.map {\n  width: 100%;\n  height: 400px;\n}\n\n",{"version":3,"sources":["p_management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAm2BA;AACA;AACA;AACA","file":"p_management.vue","sourceRoot":"src/view/pManagement","sourcesContent":["<template>\n  <div>\n    <Button style=\"margin-left: 10px;margin-right: 5px;float: left\" type=\"info\" @click=\"add\">新增</Button>\n    <!--搜索-->\n    <Row style=\"float: left\">\n      <Col span=\"12\">\n        <Select\n          v-model=\"model13\"\n          filterable\n          remote\n          style=\"width:150px\"\n          :clearable=\"true\"\n          placeholder=\"请选择或关键字搜索\"\n          :remote-method=\"remoteMethod1\"\n          :loading=\"loading3\">\n          <Option v-for=\"(item, index) in user\" :value=\"item.name\" :key=\"index\" style=\"width: 80px\">{{item.name}}</Option>\n        </Select>\n      </Col>\n    </Row>\n    <!--<Input clearable placeholder=\"请输入用户名关键字搜索\" class=\"search-input\" v-model=\"searchName\" style=\"width: 200px\"/>-->\n    <Input clearable placeholder=\"请输入工号关键字搜索\" class=\"search-input\" v-model=\"searchNum\" style=\"width: 200px\"/>\n    <Input clearable placeholder=\"请输入手机号关键字搜索\" class=\"search-input\" v-model=\"searchPhone\" style=\"width: 200px\"/>\n    <Button type=\"info\" @click=\"handSeek\">搜索</Button>\n    <Table :columns=\"columns1\" :data=\"data1\"></Table>\n    <!--新增-->\n    <Modal\n      v-model=\"modal3\"\n      title=\"新增用户信息\"\n      @on-ok=\"ok3('formAdd')\"\n      @on-cancel=\"cancel3\"\n      :loading=\"loading\">\n      <Form :model=\"formAdd\" :label-width=\"80\" :rules=\"ruleValidate\" ref=\"formAdd\">\n        <FormItem label=\"姓名\" prop=\"name\">\n          <Input v-model=\"formAdd.name\" placeholder=\"请输入1-16个字符\" :maxlength='16'></Input>\n        </FormItem>\n        <FormItem label=\"手机号\" prop=\"phone\">\n          <Input v-model=\"formAdd.phone\" placeholder=\"请输入手机号\" number></Input>\n        </FormItem>\n        <FormItem label=\"省份\" prop=\"provinceid\">\n          <Select v-model=\"formAdd.provinceid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce(item)\">{{ item.name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formAdd.provinceid\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"城市\" prop=\"cityid\">\n          <Select v-model=\"formAdd.cityid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList1\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce1(item)\">{{ item.name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formAdd.cityid\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"地区\" prop=\"areaid\">\n          <Select v-model=\"formAdd.areaid\" style=\"width:200px\">\n            <Option v-for=\"item in cityList2\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce2(item)\">{{ item.name }}</Option>\n          </Select>\n          <!--<Input v-model=\"formAdd.areaid\" placeholder=\"\"></Input>-->\n        </FormItem>\n        <FormItem label=\"详细地址\" prop=\"address\">\n          <Input v-model=\"formAdd.address\" placeholder=\"\"></Input>\n          <!--<div class=\"map1\" v-show=\"maptu\">-->\n            <!--<el-amap vid=\"amapDemo1\" class=\"amap\" :center=\"center\" :zoom=\"zoom\">-->\n              <!--<el-amap-marker v-for=\"marker in markers2\" :events=\"marker.events\" :position=\"center2\" vid=\"amapMarker1\" :clickable=\"true\"></el-amap-marker>-->\n              <!--<el-amap-info-window :position=\"center2\" :content='content2' :visible=\"modal412\" :events=\"infos2[0].events\"></el-amap-info-window>-->\n            <!--</el-amap>-->\n          <!--</div>-->\n        </FormItem>\n        <FormItem label=\"照片\">\n          <Upload\n            action=\"http://54.223.48.127/repair/public/admin/index/upd\"\n            :data=\"img\"\n            ref=\"upload\"\n            :format=\"['jpg','jpeg','png']\"\n            :show-upload-list=\"false\"\n            :before-upload=\"handleBeforUpload\"\n            :on-success=\"handleSuccess\">\n            <Button icon=\"ios-cloud-upload-outline\">点击上传</Button>\n          </Upload>\n        </FormItem>\n        <FormItem>\n          <div style=\"width: 100px;height: 100px;border: 1px darkgrey solid;text-align: center\">\n            <img :src=\"url\" alt=\"请点击上传\" style=\"width: 100px;height: 100px\" v-model=\"formAdd.img\">\n          </div>\n        </FormItem>\n        <FormItem label=\"等级\">\n          <Input v-model=\"formAdd.grade\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"技术指导\">\n          <Input v-model=\"formAdd.arrangement\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"总额\">\n          <Input v-model=\"formAdd.total\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"领用额度\">\n          <Input v-model=\"formAdd.quota\" placeholder=\"\"></Input>\n        </FormItem>\n      </Form>\n    </Modal>\n    <!--//修改弹框-->\n    <!--<Button type=\"primary\" @click=\"modal1 = true\">修改</Button>-->\n    <Modal\n      v-model=\"modal1\"\n      title=\"修改用户信息\"\n      @on-ok=\"ok('formItem')\"\n      @on-cancel=\"cancel\"\n      :loading=\"loading1\">\n      <Form :model=\"formItem\" :label-width=\"80\" :rules=\"ruleValidate2\" ref=\"formItem\">\n        <FormItem label=\"姓名\" prop=\"name\">\n          <Input v-model=\"formItem.name\" placeholder=\"\" :maxlength='16'></Input>\n        </FormItem>\n        <FormItem label=\"手机号\" prop=\"phone\">\n          <Input v-model=\"formItem.phone\" placeholder=\"\" number></Input>\n        </FormItem>\n        <FormItem label=\"密码\" prop=\"pass\">\n          <Input v-model=\"formItem.pass\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"照片\">\n          <Upload\n            action=\"http://54.223.48.127/repair/public/admin/index/upd_imgs\"\n            :data=\"img1\"\n            ref=\"upload\"\n            :format=\"['jpg','jpeg','png']\"\n            :show-upload-list=\"false\"\n            :before-upload=\"handleBeforUpload1\"\n            :on-success=\"handleSuccess1\">\n            <Button icon=\"ios-cloud-upload-outline\">点击上传</Button>\n          </Upload>\n        </FormItem>\n        <FormItem>\n          <div style=\"width: 100px;height: 100px;border: 1px darkgrey solid\">\n            <img :src=\"url1\" alt=\"请点击上传\" style=\"width: 100px;height: 100px\" v-model=\"formItem.img\">\n          </div>\n        </FormItem>\n        <FormItem label=\"省份\" prop=\"provinceid\">\n          <Select v-model=\"formItem.province\" style=\"width:200px\">\n            <Option v-for=\"item in cityList\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"城市\" prop=\"cityid\">\n          <Select v-model=\"formItem.city\" style=\"width:200px\">\n            <Option v-for=\"item in cityList1\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce1(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"地区\" prop=\"areaid\">\n          <Select v-model=\"formItem.area\" style=\"width:200px\">\n            <Option v-for=\"item in cityList2\" :value=\"item.name\" :key=\"item.id\" @click.native=\"chioce2(item)\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"详细地址\" prop=\"address\">\n          <Input v-model=\"formItem.address\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"等级\" prop=\"grade\">\n          <Input v-model=\"formItem.grade\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"技术指导\" prop=\"arrangement\">\n          <Input v-model=\"formItem.arrangement\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"总额\" prop=\"total\">\n          <Input v-model=\"formItem.total\" placeholder=\"\"></Input>\n        </FormItem>\n        <FormItem label=\"领用额度\" prop=\"quota\">\n          <Input v-model=\"formItem.quota\" placeholder=\"\"></Input>\n        </FormItem>\n      </Form>\n    </Modal>\n    <!--//地图展示-->\n    <Modal\n      width=\"600\"\n      v-model=\"modal2\"\n      title=\"查看地图\"\n      @on-ok=\"ok2\"\n      @on-cancel=\"cancel2\">\n      <Form :label-width=\"80\">\n        <FormItem label=\"详细地址\">\n          <div class=\"map\">\n            <el-amap vid=\"amapDemo\" class=\"amap\" :center=\"center\" :zoom=\"zoom\">\n              <el-amap-marker v-for=\"marker in markers\" :events=\"marker.events\" :position=\"center\" vid=\"amapMarker\" :clickable=\"true\"></el-amap-marker>\n              <el-amap-info-window :position=\"center\" :content='content' :visible=\"modal4\" :events=\"infos[0].events\"></el-amap-info-window>\n            </el-amap>\n          </div>\n        </FormItem>\n      </Form>\n    </Modal>\n    <!--//分页-->\n    <div style=\"text-align: right\">\n      <Page :total=\"dataCount\" :page-size=\"pageSize\" show-total class=\"paging\" @on-change=\"changepage\"></Page>\n    </div>\n  </div>\n</template>\n\n<script>\n    export default {\n      data () {\n        const validatePhone = (rule, value, callback) => {\n          if (!value) {\n            return callback(new Error('手机号不能为空'));\n          } else if (!/^1[34578]\\d{9}$/.test(value)) {\n            callback('手机号格式不正确');\n          } else {\n            callback();\n          }\n        };\n        const validatePass = (rule, value, callback) => {\n          // 此时便能打印value值查看\n          console.log(value,'打印值')\n        };\n        return {\n          user:[],\n          model13: '',\n          loading3: false,\n          markers: [\n            {\n              events: {\n                click: () => {\n                  this.modal4 = !this.modal4\n                  //此处点击是有bug\n                  // console.log('true')\n                }\n              }\n            }\n          ],\n          infos: [\n            {\n              events: {\n                // open () {\n                //   this.modal4 = true\n                //   console.log('true1')\n                // },\n                close() {\n                  this.modal4 = false\n                  // console.log('false')\n                }\n              }\n            }\n          ],\n          zoom:14,\n          center:[121.6292529148,31.2035397816],\n          // center:[],\n          content:'',\n          ruleValidate: {\n            name: [\n              { required: true, message: '不能为空', trigger: 'blur' }\n            ],\n            phone: [\n              // { required: true, message: '不能为空', trigger: 'blur' },\n              {type: 'number',required:true,validator:validatePhone,message:'请输入正确的手机号',trigger:'change'}\n            ],\n            provinceid: [\n              { required: true, message: '不能为空', trigger: 'blur' },\n            ],\n            cityid: [\n              { required: true, message: '不能为空', trigger: 'blur' },\n            ],\n            areaid: [\n              { required: true, message: '不能为空', trigger: 'blur' },\n            ],\n            address: [\n              { required: true, message: '不能为空', trigger: 'blur' },\n            ]\n          },\n          ruleValidate2: {\n            name: [\n              { required: true, message: '不能为空', trigger: 'blur' }\n            ],\n            phone: [\n              // { required: true, message: '不能为空', trigger: 'blur' },\n              {type: 'number',required:true,validator:validatePhone,message:'请输入正确的手机号',trigger:'change'}\n            ],\n            pass: [\n              { required: true, message: '不能为空', trigger: 'blur' },\n            ],\n            // provinceid: [\n            //   { required: true, message: '不能为空', trigger: 'blur' },\n            // ],\n            // cityid: [\n            //   { required: true, message: '不能为空', trigger: 'blur' },\n            // ],\n            // areaid: [\n            //   { required: true, message: '不能为空', trigger: 'blur' },\n            // ],\n            address: [\n              { required: true, message: '不能为空', trigger: 'blur' },\n            ]\n          },\n          searchName:'',\n          searchNum:'',\n          searchPhone:'',\n          cityList:[],\n          cityList1:[],\n          cityList2:[],\n          cityListId:'',\n          cityListId1:'',\n          cityListId2:'',\n          shengtype:\"\",\n          shitype:'',\n          qutype:'',\n          provincename:'',\n          cityname:'',\n          areaname:'',\n          // url:'@/assets/images/imgs.png',\n          url:'',\n          url1:'',\n          img:{\n            image:null,\n            jwt:localStorage.getItem('jwt')\n          },\n          img1:{\n            image:null,\n            jwt:localStorage.getItem('jwt')\n          },\n          formAdd:{\n            name:'',\n            phone:'',\n            grade:'',\n            arrangement:'',\n            total:'',\n            quota:'',\n            cityid:'',\n            provinceid:'',\n            areaid:'',\n            address:'',\n            img:'',\n            jwt:localStorage.getItem('jwt')\n          },\n          formItem:{\n            Id:'',\n            name:'',\n            phone:'',\n            grade:'',\n            arrangement:'',\n            total:'',\n            quota:'',\n            pass:'',\n            province:'',\n            city:'',\n            area:'',\n            provinceid:'',\n            cityid:'',\n            areaid:'',\n            address:'',\n            img:'',\n            jwt:localStorage.getItem('jwt')\n          },\n          formImg:{\n            Id:\"\",\n            img:null,\n            jwt:localStorage.getItem('jwt')\n          },\n          modal1: false,\n          modal2: false,\n          modal3:false,\n          modal4:true,\n          loading: true,\n          loading1: true,\n          //    分页\n          ajaxHistoryData: [],\n          // 初始化信息总条数\n          dataCount: 0,\n          // 每页显示多少条\n          pageSize: 10,\n          page:1,\n          columns1: [\n            {\n              title: '姓名',\n              key: 'name',\n              width: 120\n            },\n            {\n              title: '照片',\n              key: 'img',\n              render: (h, params) => {\n                // console.log(params.row)\n                return h('img', {\n                  style: {\n                    width: '100px'\n                  },\n                  attrs: {\n                    src: params.row.img, style: 'width: 100px;height: 100px'\n                  }\n                  // on: {\n                  //     click: () => {\n                  //         this.hangImg(1, params.row);\n                  //     }\n                  // }\n                });\n              }\n            },\n            {\n              title: '手机号',\n              key: 'phone',\n              width: 120\n            },\n            {\n              title: '工号',\n              key: 'number'\n            },\n            {\n              title: '等级',\n              key: 'grade'\n            },\n            {\n              title: '技术指数',\n              key: 'arrangement',\n              width: 60\n            },\n            {\n              title: '总额',\n              key: 'total'\n            },\n            {\n              title: '领用额度',\n              key: 'quota'\n            },\n            {\n              title: '上门城市',\n              key: 'city'\n            },\n            {\n              title: '详细地址',\n              key: 'address'\n            },\n            {\n              title: '密码',\n              key: 'pass'\n            },\n            {\n              title: '创建时间',\n              key: 'time',\n              width: 150\n            },\n            {\n              title: '操作',\n              key: 'action',\n              align: 'center',\n              render: (h, params) => {\n                  return h('div', [\n                    h('Button', {\n                      props: {\n                        type: 'info',\n                        size: 'small'\n                      },\n                      style: {\n                        marginRight: '5px',\n                        marginBottom: '5px'\n                      },\n                      on: {\n                        click: () => {\n                          this.xiugai(params.row);\n                        }\n                      }\n                    }, '修改'),\n                    h('Button', {\n                      props: {\n                        type: 'info',\n                        size: 'small'\n                      },\n                      style: {\n                        marginRight: '5px',\n                        marginBottom: '5px'\n                      },\n                      on: {\n                        click: () => {\n                          this.delete(params.row);\n                        }\n                      }\n                    }, '删除'),\n                    h('Button', {\n                      props: {\n                        type: 'info',\n                        size: 'small'\n                      },\n                      style: {\n                        marginRight: '5px',\n                        marginBottom: '5px'\n                      },\n                      on: {\n                        click: () => {\n                          this.map1(params.row);\n                        }\n                      }\n                    }, '查看地图'),\n                    h('Button', {\n                      props: {\n                        type: 'info',\n                        size: 'small'\n                      },\n                      style: {\n                        marginRight: '5px'\n                      },\n                      on: {\n                        click: () => {\n                          this.manage(params.row);\n                        }\n                      }\n                    }, '发送消息'),\n                  ]);\n              }\n            }\n          ],\n          data1: []\n        }\n      },\n      created() {\n        // console.log(localStorage.getItem('jwt'))\n        this.tableShow()\n      },\n      methods: {\n        //用户信息展示\n        tableShow(){\n          this.$axios({\n            method: 'post',\n            url: 'admin/user/show',\n            data: this.$qs.stringify({\n              name:this.model13,\n              phone:this.searchPhone,\n              number:this.searchNum,\n              page:this.page,\n              jwt: localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res.data.table,'用户信息')\n            this.ajaxHistoryData = res.data.table;\n            this.list = res.data.table;\n            this.user = res.data.table;\n            // this.dataCount = res.data.table.length;\n            this.dataCount = res.data.count;\n            // 初始化显示，小于每页显示条数，全显，大于每页显示条数，取前每页条数显示\n            if (res.data.count < this.pageSize) {\n              // this.historyData = this.ajaxHistoryData;\n              this.data1 = res.data.table\n            } else {\n              this.data1 = this.ajaxHistoryData.slice(0, this.pageSize);\n            }\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n        },\n        //搜索\n        remoteMethod1 (query) {\n          console.log(query,'skjfdasfkasd')\n          // this.tableShow()\n          if (query !== '') {\n            this.loading3 = true;\n            setTimeout(() => {\n              this.loading3 = false;\n              this.user = this.list;\n            }, 200);\n          } else {\n            this.user = [];\n          }\n          // console.log(this.model13)\n        },\n        handSeek(){\n          this.tableShow()\n        },\n        //新增\n        add(){\n          this.modal3=true\n          this.sheng()\n        },\n        chioce(item){\n          // console.log(item,'市三级联动1')\n          this.cityListId=item.id\n          this.shengtype=item.type\n          this.shi()\n        },\n        //省联动\n        sheng(){\n          this.$axios({\n            url: 'admin/user/adress',\n            method: 'get',\n          }).then(res => {\n            // console.log(res,'市三级联动1')\n            this.cityList = res.data.table\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...')\n          });\n        },\n        chioce1(item){\n          // console.log(item,'12345')\n          this.cityListId1=item.id\n          this.shitype=item.type\n          this.qu()\n        },\n        //市联动\n        shi(){\n          this.$axios({\n            method: 'post',\n            url: 'admin/user/getRegion',\n            data: this.$qs.stringify({\n              id: this.cityListId,\n              type: this.shengtype\n              // jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res,'市三级联动2')\n            this.cityList1=res.data\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n        },\n        chioce2(item){\n          this.cityListId2=item.id\n          this.qutype=item.type\n        },\n        //区联动\n        qu(){\n          this.$axios({\n            method: 'post',\n            url: 'admin/user/getRegion',\n            data: this.$qs.stringify({\n              id: this.cityListId1,\n              type: this.shitype\n              // jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res,'市三级联动3')\n            this.cityList2=res.data\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n        },\n        handleBeforUpload (file) {\n          this.img.image = file  // 将回调的文件信息存入data.file\n        },\n        handleSuccess(response){\n          console.log(response.url)\n          this.url = response.url\n        },\n        ok3 (formAdd) {\n          // console.log(this.$nextTick,'验证')\n          this.$refs[formAdd].validate((valid) => {\n            if (valid) {\n              this.$axios({\n                    method: 'post',\n                    url: 'admin/user/insert',\n                    data: this.$qs.stringify({\n                      name: this.formAdd.name,\n                      phone: this.formAdd.phone,\n                      grade: this.formAdd.grade,\n                      arrangement: this.formAdd.arrangement,\n                      total: this.formAdd.total,\n                      quota: this.formAdd.quota,\n                      provinceid: this.cityListId,\n                      cityid: this.cityListId1,\n                      areaid:this.cityListId2,\n                      address:this.formAdd.address,\n                      img:this.url,\n                      jwt:localStorage.getItem('jwt')\n                    })\n                  }).then(res => {\n                    console.log(res,'用户增加')\n                    if(res.data.code === 200){\n                      this.tableShow()\n                      this.modal3 = false\n                      this.formAdd = {}\n                    }else if(res.data.code === 400){\n                      this.modal3 = true\n                      this.$Message.error('请输入正确的详细地址信息...');\n                    }\n                  }).catch(res => {\n                    this.$Message.error('请求超时,请稍后再试...');\n                  });\n              callback();\n            } else{\n              this.loading = false;\n              this.$nextTick(() => {\n                this.loading = true;\n              });\n              this.$Message.error('新增失败，请填写完整的信息!');\n            }\n          })\n          this.tableShow()\n          this.formAdd = {}\n        },\n        cancel3 () {\n          // this.$Message.info('Clicked cancel');\n        },\n        //用户修改\n        xiugai(row){\n          console.log(row)\n          this.modal1=true\n          this.formItem=row\n          this.formItem.Id=row.Id\n          this.url1=row.img\n          //省\n          this.$axios({\n            url: 'admin/user/adress',\n            method: 'get',\n          }).then(res => {\n            // console.log(res,'市三级联动1')\n            this.cityList = res.data.table\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...')\n          });\n          //市\n          this.$axios({\n            method: 'post',\n            url: 'admin/user/getRegion',\n            data: this.$qs.stringify({\n              id: row.provinceid,\n              type: 1,\n              // jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res,'市三级联动2')\n            this.cityList1=res.data\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n          //区\n          this.$axios({\n            method: 'post',\n            url: 'admin/user/getRegion',\n            data: this.$qs.stringify({\n              id: row.cityid,\n              type: 2,\n              // jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            // console.log(res,'qu三级联动3')\n            this.cityList2=res.data\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n          this.formItem.province=row.province\n          this.formItem.city=row.city\n          this.formItem.area=row.area\n\n          this.cityListId=row.provinceid\n          this.cityListId1=row.cityid\n          this.cityListId2=row.areaid\n        },\n        handleBeforUpload1 (file) {\n          this.img1.image = file  // 将回调的文件信息存入data.file\n        },\n        handleSuccess1(response){\n          console.log(response.url)\n          this.url1 = response.url\n        },\n        ok (formItem) {\n          console.log(this.cityListId,'hsndjkfsdlf')\n          this.modal3=false\n          this.$refs[formItem].validate((valid) => {\n            if (valid) {\n              this.$axios({\n                method: 'post',\n                url: 'admin/user/upd',\n                data: this.$qs.stringify({\n                  Id:this.formItem.Id,\n                  name:this.formItem.name,\n                  phone: this.formItem.phone,\n                  grade: this.formItem.grade,\n                  arrangement: this.formItem.arrangement,\n                  total: this.formItem.total,\n                  quota: this.formItem.quota,\n                  pass: this.formItem.pass,\n                  provinceid: this.cityListId,\n                  cityid: this.cityListId1,\n                  areaid:this.cityListId2,\n                  address: this.formItem.address,\n                  img:this.url1,\n                  jwt:localStorage.getItem('jwt')\n                })\n              }).then(res => {\n                console.log(res,'用户修改')\n                this.modal3=false\n                this.modal1=false\n                this.tableShow()\n              }).catch(res => {\n                this.$Message.error('请求超时,请稍后再试...');\n              });\n              callback();\n            } else{\n              this.loading = false;\n              this.$nextTick(() => {\n                this.loading = true;\n              });\n              this.$Message.error('修改失败,请正确填写信息!');\n            }\n          })\n          this.tableShow()\n        },\n        cancel () {\n          this.modal3=false\n          // this.$Message.info('Clicked cancel');\n        },\n        // 查看地图\n        close(){\n          // console.log('1234')\n        },\n        map1(row){\n          // console.log(row)\n          this.modal2=true\n          // this.center[0]=row.longitude\n          // this.center[1]=row.latitude     此方式错误不显示\n          this.content = row.city+row.area+row.address\n          // console.log(this.center,'地图')\n          // console.log(this.center,'字符串')\n          // this.center=this.center.map(Number)\n          // console.log(this.center,'数字')\n        },\n        ok2 () {\n          this.tableShow()\n        },\n        cancel2 () {\n          this.tableShow()\n        },\n        event(){\n          console.log('地图点击事件')\n        },\n        // click1(event){},\n        manage(row){\n          console.log(row)\n          this.$axios({\n            method: 'post',\n            url: 'admin/mail/insert',\n            data: this.$qs.stringify({\n              title:'收款提醒',\n              main:'未交收款' + row.total + '元',\n              jwt:localStorage.getItem('jwt')\n            })\n          }).then(res => {\n            this.tableShow()\n            this.modal3=false\n            this.formAdd = {}\n          }).catch(res => {\n            this.$Message.error('请求超时,请稍后再试...');\n          });\n        },\n\n        //删除\n        delete(row){\n          // console.log(row)\n          this.$Modal.confirm({\n            title: '删除',\n            content: '确认删除该条信息吗？',\n            onOk: () => {\n              this.$axios({\n                method: 'post',\n                url: 'admin/user/delete',\n                data: this.$qs.stringify({\n                  Id: row.Id,\n                  jwt:localStorage.getItem('jwt')\n                })\n              }).then(res => {\n                this.tableShow()\n              }).catch(res => {\n                this.$Message.error('请求超时,请稍后再试...');\n              });\n            },\n            onCancel: () => {\n              this.$Message.info('取消');\n            }\n          });\n        },\n        //分页\n        changepage (index) {\n          this.page = index\n          this.tableShow()\n          var _start = (index - 1) * this.pageSize;\n          var _end = index * this.pageSize;\n          this.data1 = this.ajaxHistoryData.slice(_start, _end);\n        }\n      },\n    }\n</script>\n\n<style scoped>\n  .map {\n    width: 100%;\n    height: 400px;\n  }\n\n</style>\n"]}]}