{"remainingRequest":"/Users/szt/Desktop/维修后台/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/szt/Desktop/维修后台/src/view/map/mapPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/szt/Desktop/维修后台/src/view/map/mapPage.vue","mtime":1566981439000},{"path":"/Users/szt/Desktop/维修后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/维修后台/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/szt/Desktop/维修后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/维修后台/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  // components: { VDistpicker },\n  data () {\n    return {\n      zoom:14,\n      center:[121.6292529148,31.2035397816],\n      mapArry:[],\n      Wposition:[121.91949, 30.88303],\n      mapArrylength:'',\n      a:'',\n      Wcontent:'123',\n      modal4:[],\n      mapindex:0,\n      position:[],\n      currentWindow: {\n        position: [121.6292529148,31.2035397816],\n        content: '浦东新区',\n        events: {\n          click: (a,b,c) => {\n            // console.log(a.target.Uh.vid)\n            this.mapindex = a.target.Uh.vid\n            this.modal4[this.mapindex] = !this.modal4[this.mapindex]\n\n            console.log(this.modal4[this.mapindex])\n            console.log( this.mapindex )\n            // this.$router.push({\n            //   path:'/o_management',\n            //   query:{\n            //     Id:this.mapArry[a.target.Uh.vid].Id\n            //   }\n            // })\n          },\n        },\n      },\n      infos: {\n        events: {\n          // open () {\n          //   this.modal4[this.mapindex] = !this.modal4[this.mapindex]\n          //   console.log('true1')\n          //   console.log('11111111')\n          // },\n          close() {\n            this.modal4[this.mapindex] = false\n            console.log(this.modal4[this.mapindex],'信息窗体')\n            console.log(this.mapindex)\n          }\n        }\n      },\n    }\n  },\n  created() {\n    this.tableShow()\n    // this.mounted()\n  },\n  methods: {\n    // manage(){\n    //   this.modal4[this.mapindex] = !this.modal4[this.mapindex]\n    //   console.log(\"信息窗体\"+this.modal4[this.mapindex])\n    // },\n    //用户信息展示\n    tableShow(){\n      this.$axios({\n        method: 'post',\n        url: 'admin/order/marker',\n        data: this.$qs.stringify({\n          // time:this.model13,\n          jwt: localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res.data.table)\n        this.mapArry = res.data.table\n        // var i = res.data.table.length\n        for(var i = 0; i < res.data.table.length;i ++){\n          this.modal4.push(JSON.parse('false'))\n        }\n      }).catch(res => {\n        // this.$Message.error('请求超时,请稍后再试...');\n      });\n    },\n    // tiaozhuan(){\n    //   this.$router.push({\n    //     path:'/o_management',\n    //     query:{\n    //       Id:res.data.table[i].Id\n    //     }\n    //   })\n    // }\n  },\n  mounted(){\n    // console.log('1112223')\n    // console.log(location.search,'123')\n    this.$axios({\n      method: 'post',\n      url: 'admin/order/marker',\n      data: this.$qs.stringify({\n        // time:this.model13,\n        jwt: localStorage.getItem('jwt')\n      })\n    }).then(res => {\n      // console.log(res.data.table)\n      var map = new AMap.Map(\"container\", {\n        resizeEnable: true,\n        // zoom: 16,\n        // center:new AMap.LngLat(121.6292529148,31.2035397816)\n      });\n\n      var lnglats = [];\n      for (var j = 0; j < res.data.table.length; j++){\n        lnglats[j] = res.data.table[j].position\n      }\n      // console.log(lnglats,'总坐标点')\n      var infoWindow = new AMap.InfoWindow({offset: new AMap.Pixel(0, -20)});\n      // console.log(lnglats,'irutjreklgjdf')\n      for (var i = 0, marker; i < res.data.table.length; i++) {\n        var marker = new AMap.Marker({\n          position: lnglats[i],\n          map: map\n        });\n\n        localStorage.setItem('Id', res.data.table[i].Id)\n\n        marker.content = '<strong>客户名称:</strong>' + res.data.table[i].customername + '<br>' +\n                          '<strong>客户手机号：</strong>' + res.data.table[i].userphone + '<br>' +\n                          '<strong>地址：</strong>' + res.data.table[i].orderadress + '<br>' +\n                          '<strong>达人名称：</strong>' + res.data.table[i].username + '<br>' +\n                          '<a href=\"http://www.maintance.pro/admin/#/o_management?Id='+\n                          res.data.table[i].Id+\n                          '\">查看详情</a>' ;\n\n        marker.on('click', markerClick);\n        marker.emit('click', {target: marker});\n      }\n\n      function markerClick(e) {\n        infoWindow.setContent(e.target.content);\n        infoWindow.open(map, e.target.getPosition());\n      }\n      map.setFitView();\n      map.setZoom(10);\n      map.setZoomAndCenter(12, [121.6292529148, 31.2035397816]);\n      // map.setCenter(121.6292529148,31.2035397816)\n      // console.log(window.location.href.split(\"?\")[1].split(\"=\")[1],'a参数')\n    }).catch(res => {\n      // this.$Message.error('请求超时,请稍后再试...');\n    });\n\n  }\n}\n",{"version":3,"sources":["mapPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"mapPage.vue","sourceRoot":"src/view/map","sourcesContent":["<template>\n  <div>\n    <div id=\"container\">\n      <!--<el-amap vid=\"amapDemo\" class=\"amap\" :zoom=\"zoom\">-->\n        <!--&lt;!&ndash;:title=\"item.orderadress\"&ndash;&gt;-->\n        <!--<el-amap-marker v-for=\"(item,index) in mapArry\" :position=\"item.position\" :events=\"currentWindow.events\" :vid=\"index\">-->\n        <!--&lt;!&ndash;<el-amap-marker :position=\"position\" :events=\"currentWindow.events\" :vid=\"mapArrylength\">&ndash;&gt;-->\n\n        <!--</el-amap-marker>-->\n        <!--<el-amap-info-window-->\n          <!--:position=\"Wposition\"-->\n          <!--:content=\"Wcontent\"-->\n          <!--:visible=\"modal4[mapindex]\"-->\n          <!--:events=\"infos.events\">-->\n        <!--</el-amap-info-window>-->\n        <!--&lt;!&ndash;\"content.orderadress\"&ndash;&gt;-->\n      <!--</el-amap>-->\n    </div>\n  </div>\n</template>\n<script>\n  export default {\n    // components: { VDistpicker },\n    data () {\n      return {\n        zoom:14,\n        center:[121.6292529148,31.2035397816],\n        mapArry:[],\n        Wposition:[121.91949, 30.88303],\n        mapArrylength:'',\n        a:'',\n        Wcontent:'123',\n        modal4:[],\n        mapindex:0,\n        position:[],\n        currentWindow: {\n          position: [121.6292529148,31.2035397816],\n          content: '浦东新区',\n          events: {\n            click: (a,b,c) => {\n              // console.log(a.target.Uh.vid)\n              this.mapindex = a.target.Uh.vid\n              this.modal4[this.mapindex] = !this.modal4[this.mapindex]\n\n              console.log(this.modal4[this.mapindex])\n              console.log( this.mapindex )\n              // this.$router.push({\n              //   path:'/o_management',\n              //   query:{\n              //     Id:this.mapArry[a.target.Uh.vid].Id\n              //   }\n              // })\n            },\n          },\n        },\n        infos: {\n          events: {\n            // open () {\n            //   this.modal4[this.mapindex] = !this.modal4[this.mapindex]\n            //   console.log('true1')\n            //   console.log('11111111')\n            // },\n            close() {\n              this.modal4[this.mapindex] = false\n              console.log(this.modal4[this.mapindex],'信息窗体')\n              console.log(this.mapindex)\n            }\n          }\n        },\n      }\n    },\n    created() {\n      this.tableShow()\n      // this.mounted()\n    },\n    methods: {\n      // manage(){\n      //   this.modal4[this.mapindex] = !this.modal4[this.mapindex]\n      //   console.log(\"信息窗体\"+this.modal4[this.mapindex])\n      // },\n      //用户信息展示\n      tableShow(){\n        this.$axios({\n          method: 'post',\n          url: 'admin/order/marker',\n          data: this.$qs.stringify({\n            // time:this.model13,\n            jwt: localStorage.getItem('jwt')\n          })\n        }).then(res => {\n          // console.log(res.data.table)\n          this.mapArry = res.data.table\n          // var i = res.data.table.length\n          for(var i = 0; i < res.data.table.length;i ++){\n            this.modal4.push(JSON.parse('false'))\n          }\n        }).catch(res => {\n          // this.$Message.error('请求超时,请稍后再试...');\n        });\n      },\n      // tiaozhuan(){\n      //   this.$router.push({\n      //     path:'/o_management',\n      //     query:{\n      //       Id:res.data.table[i].Id\n      //     }\n      //   })\n      // }\n    },\n    mounted(){\n      // console.log('1112223')\n      // console.log(location.search,'123')\n      this.$axios({\n        method: 'post',\n        url: 'admin/order/marker',\n        data: this.$qs.stringify({\n          // time:this.model13,\n          jwt: localStorage.getItem('jwt')\n        })\n      }).then(res => {\n        // console.log(res.data.table)\n        var map = new AMap.Map(\"container\", {\n          resizeEnable: true,\n          // zoom: 16,\n          // center:new AMap.LngLat(121.6292529148,31.2035397816)\n        });\n\n        var lnglats = [];\n        for (var j = 0; j < res.data.table.length; j++){\n          lnglats[j] = res.data.table[j].position\n        }\n        // console.log(lnglats,'总坐标点')\n        var infoWindow = new AMap.InfoWindow({offset: new AMap.Pixel(0, -20)});\n        // console.log(lnglats,'irutjreklgjdf')\n        for (var i = 0, marker; i < res.data.table.length; i++) {\n          var marker = new AMap.Marker({\n            position: lnglats[i],\n            map: map\n          });\n\n          localStorage.setItem('Id', res.data.table[i].Id)\n\n          marker.content = '<strong>客户名称:</strong>' + res.data.table[i].customername + '<br>' +\n                            '<strong>客户手机号：</strong>' + res.data.table[i].userphone + '<br>' +\n                            '<strong>地址：</strong>' + res.data.table[i].orderadress + '<br>' +\n                            '<strong>达人名称：</strong>' + res.data.table[i].username + '<br>' +\n                            '<a href=\"http://www.maintance.pro/admin/#/o_management?Id='+\n                            res.data.table[i].Id+\n                            '\">查看详情</a>' ;\n\n          marker.on('click', markerClick);\n          marker.emit('click', {target: marker});\n        }\n\n        function markerClick(e) {\n          infoWindow.setContent(e.target.content);\n          infoWindow.open(map, e.target.getPosition());\n        }\n        map.setFitView();\n        map.setZoom(10);\n        map.setZoomAndCenter(12, [121.6292529148, 31.2035397816]);\n        // map.setCenter(121.6292529148,31.2035397816)\n        // console.log(window.location.href.split(\"?\")[1].split(\"=\")[1],'a参数')\n      }).catch(res => {\n        // this.$Message.error('请求超时,请稍后再试...');\n      });\n\n    }\n  }\n</script>\n\n<style>\n  #container {\n    width: 100%;\n    height: 600px;\n  }\n\n</style>\n"]}]}