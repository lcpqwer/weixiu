{"remainingRequest":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/szt/Desktop/iview-admin/src/view/join-page.vue?vue&type=style&index=0&id=73d652fe&scoped=true&lang=css&","dependencies":[{"path":"/Users/szt/Desktop/iview-admin/src/view/join-page.vue","mtime":1562568427000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/szt/Desktop/iview-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.amap-page-container {\n\n  height: 600px;\n\n  position: relative;\n\n}\n\n.search-input{\n\n  border: 1px solid red;\n\n  position: absolute;\n\n  z-index: 5;\n\n  width: 80%;\n\n  left: 10%;\n\n  padding: 5px;\n\n}\n\n.toolbar{\n\n  margin-top: 15px;\n\n}\n\n",{"version":3,"sources":["join-page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA","file":"join-page.vue","sourceRoot":"src/view","sourcesContent":["<template>\n  <div>\n    <button @click=\"addRadius\">增加范围</button>\n    <button @click=\"startSearch\">搜索</button>\n    <p>{{address}}</p>\n    <hr>\n    <div class=\"amap-page-container\">\n      <input v-if=\"toSearch\" type=\"text\" class=\"search-input\" id=\"search\">\n      <el-amap\n        vid=\"amap\"\n        :zoom=\"zoom\"\n        class=\"amap-demo\"\n        :center=\"center\"\n        :amapManager=\"amapManager\"\n        :events=\"events\"\n      >\n        <el-amap-circle\n          vid=\"circle\"\n          :center=\"center\"\n          :radius=\"radius\"\n          fill-opacity=\"0.2\"\n          strokeColor=\"#38f\"\n          strokeOpacity=\"0.8\"\n          strokeWeight=\"1\"\n          fillColor=\"#38f\"\n        >\n        </el-amap-circle>\n      </el-amap>\n    </div>\n    <ul>\n      <li v-for=\"item in result\" :key=\"item.id\">{{item.name}}</li>\n    </ul>\n  </div>\n</template>\n<script>\n  import {AMapManager} from \"vue-amap\"\n  let amapManager=new AMapManager();\n  export default {\n    data() {\n      let vm = this;\n      return {\n        zoom:16,\n        center: [121.329402,31.228667],\n        result:[],\n        address:\"\",\n        radius:100,\n        toSearch:false,\n        amapManager,\n        map:null,\n        events:{\n          init(o){\n            vm.map=o;\n            //方法一\n            // AMapUI.loadUI(['misc/PositionPicker'], function(PositionPicker) {\n            //   var positionPicker = new PositionPicker({\n            //       mode: 'dragMap',\n            //       map: o\n            //   });\n            //   positionPicker.on('success', function(positionResult){\n            //     vm.result=positionResult.regeocode.pois;\n            //     vm.address=positionResult.regeocode.formattedAddress;\n            //     vm.center=[positionResult.position.lng,positionResult.position.lat]\n            //   })\n            //   positionPicker.start();\n            // })\n          }\n        }\n      };\n    },\n    watch:{\n      map:function(){\n        if(this.map!=null){\n          this.startDrag();\n        }\n      }\n    },\n    methods:{\n      startDrag(){//方法二\n        let vm=this;\n        let map=this.amapManager.getMap();\n        AMapUI.loadUI(['misc/PositionPicker'], function(PositionPicker) {\n          var positionPicker = new PositionPicker({\n            mode: 'dragMap',\n            map: map\n          });\n          //定位\n          let geolocation;\n          map.plugin('AMap.Geolocation', function () {\n            geolocation=new AMap.Geolocation({\n              showButton: true,        //显示定位按钮，默认：true\n              showMarker: false,        //定位成功后在定位到的位置显示点标记，默认：true\n              extensions:'all'\n            })\n            map.addControl(geolocation);\n            geolocation.getCurrentPosition();\n            AMap.event.addListener(geolocation, 'complete', function(data){\n              positionPicker.start();\n            });//返回定位信息\n          })\n          positionPicker.on('success', function(positionResult){\n            vm.result=positionResult.regeocode.pois;\n            vm.address=positionResult.regeocode.formattedAddress;\n            vm.center=[positionResult.position.lng,positionResult.position.lat]\n          })\n          positionPicker.on('fail', function(failResult){\n            console.log(failResult)\n          })\n          // positionPicker.start();\n        })\n      },\n      addRadius(){\n        this.radius+=10;\n      },\n      startSearch() {\n        let vm=this;\n        let map=this.amapManager.getMap();\n        this.toSearch=true;\n        AMapUI.loadUI(['misc/PoiPicker'], function(PoiPicker) {\n          var poiPicker = new PoiPicker({\n            input: 'search', //输入框id\n\n          });\n          //监听poi选中信息\n          poiPicker.on('poiPicked', function(poiResult) {\n            //用户选中的poi点信息\n            vm.center=[poiResult.item.location.lng,poiResult.item.location.lat]\n          });\n        });\n      },\n    }\n  };\n</script>\n\n<style scoped>\n\n  .amap-page-container {\n\n    height: 600px;\n\n    position: relative;\n\n  }\n\n  .search-input{\n\n    border: 1px solid red;\n\n    position: absolute;\n\n    z-index: 5;\n\n    width: 80%;\n\n    left: 10%;\n\n    padding: 5px;\n\n  }\n\n  .toolbar{\n\n    margin-top: 15px;\n\n  }\n\n</style>\n"]}]}